<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>PPxu is me</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ppxu.me/"/>
  <updated>2016-09-09T02:55:20.000Z</updated>
  <id>https://ppxu.me/</id>
  
  <author>
    <name>PPxu</name>
    <email>xyang0110@126.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åœ¨Macä¸Šä½¿ç”¨Dockeré…ç½®nginxå’Œnode.js</title>
    <link href="https://ppxu.me/2016/09/06/setup-nginx-nodejs-with-docker-in-mac/"/>
    <id>https://ppxu.me/2016/09/06/setup-nginx-nodejs-with-docker-in-mac/</id>
    <published>2016-09-06T11:52:07.000Z</published>
    <updated>2016-09-09T02:55:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€å•è®°å½•ä¸€ä¸‹å¦‚ä½•åœ¨ Mac ä¸Šä½¿ç”¨ Dockerï¼Œå¹¶é…ç½® nginx å’Œ node.js å¼€å‘ç¯å¢ƒçš„æ“ä½œæ­¥éª¤ã€‚</p>
<a id="more"></a>
<p>Mac ä¸Šæ¨èä½¿ç”¨å®˜æ–¹çš„å®‰è£…åŒ…æ¥å®‰è£… <a href="https://www.docker.com/" target="_blank" rel="external">Docker</a>ï¼Œè¿™æ˜¯ <a href="https://download.docker.com/mac/stable/Docker.dmg" target="_blank" rel="external">ä¸‹è½½åœ°å€</a>ï¼Œå®‰è£…å¥½åè¿è¡Œè½¯ä»¶ï¼Œåœ¨èœå•æ ä¸Šå°±å¯ä»¥çœ‹åˆ°ä¸€åªèŒèŒçš„é²¸é±¼äº†ã€‚</p>
<p>æˆ‘çš„ç›®æ ‡æ˜¯åŸºäºä¸€ä¸ª Linux é•œåƒï¼Œå®‰è£… nginx å’Œ node.jsï¼Œè¿è¡Œä¸€ä¸ªç®€å•çš„ node.js æœåŠ¡å™¨ã€‚</p>
<p><a href="https://hub.docker.com/explore/" target="_blank" rel="external">Docker Hub</a> ä¸Šæœ‰å¾ˆå¤šå®˜æ–¹å’Œéå®˜æ–¹çš„é•œåƒï¼Œæˆ‘é€‰çš„æ˜¯å®˜æ–¹çš„ <a href="https://hub.docker.com/_/centos/" target="_blank" rel="external">centos</a>ã€‚</p>
<p>ä¸‹é¢æ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// ä¸‹è½½æœ€æ–° centos é•œåƒ</div><div class="line">$ docker pull centos:latest</div><div class="line"></div><div class="line">// è¿è¡Œè¿™ä¸ªé•œåƒï¼Œå‚æ•°è¯´æ˜è¯¦è§ [reference/commandline](https://docs.docker.com/engine/reference/commandline/)</div><div class="line">$ docker run -it --name web -p 8888:80 centos:latest</div></pre></td></tr></table></figure>
<p>ç„¶åå‘½ä»¤è¡Œå°±ä¼šåˆ‡æ¢åˆ°å®¹å™¨ç³»ç»Ÿçš„å‘½ä»¤è¡Œä¸­ï¼Œä¸‹é¢å°±æ˜¯å®‰è£… nginx å’Œ node.js äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä¸æ›´æ–°äº†ï¼Œæ›´æ–°ä¼šå¢åŠ å‡ ç™¾Mé•œåƒä½“ç§¯</span></div><div class="line"><span class="comment"># // æ›´æ–°åŒ…</span></div><div class="line"><span class="comment"># $ yum -y update</span></div><div class="line"></div><div class="line">// å®‰è£… nginx</div><div class="line">$ yum -y install wget</div><div class="line">$ wget http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</div><div class="line">$ rpm -ivh nginx-release-centos-7-0.el7.ngx.noarch.rpm</div><div class="line">$ yum -y install nginx</div><div class="line"></div><div class="line">// ä¿®æ”¹ä¸€ä¸‹ nginx é…ç½®ï¼Œè½¬å‘ node.js ç«¯å£</div><div class="line">$ vi /etc/nginx/conf.d/default.conf</div></pre></td></tr></table></figure>
<figure class="highlight tp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">  listen       <span class="number">80</span>;</div><div class="line">  server_name  localhost;</div><div class="line"></div><div class="line">  location / &#123;</div><div class="line">    proxy_pass        http:<span class="comment">//127.0.0.1:3000/;</span></div><div class="line">    proxy_redirect    off;</div><div class="line">    proxy_set_header  <span class="keyword">X</span>-Real-IP        <span class="variable">$remote_addr</span>;</div><div class="line">    proxy_set_header  <span class="keyword">X</span>-Forwarded-For  <span class="variable">$proxy_add_x_forwarded_for</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ...</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// å¯åŠ¨ nginx</div><div class="line">$ nginx</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æ‰‹åŠ¨ç¼–è¯‘å®‰è£… node.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// å®‰è£…ä¾èµ–</div><div class="line">$ yum -y install gcc-c++</div><div class="line"></div><div class="line">// ä¸‹è½½æœ€æ–° node.js</div><div class="line">$ wget https://nodejs.org/dist/v6.5.0/node-v6.5.0.tar.gz</div><div class="line"></div><div class="line">// è§£å‹&amp;å®‰è£…</div><div class="line">$ tar zxf node-v6.5.0.tar.gz</div><div class="line">$ <span class="built_in">cd</span> node-v6.5.0</div><div class="line">$ ./configure</div><div class="line">$ make &amp;&amp; make install</div></pre></td></tr></table></figure>
<p>node.js å®‰è£…å¥½åå†™ä¸€ä¸ªç®€å•çš„ server.js</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> http = require(<span class="string">'http'</span>)</div><div class="line"></div><div class="line"><span class="keyword">const</span> server = http.createServer((req, res) =&gt; &#123;</div><div class="line">  res.<span class="built_in">end</span>(<span class="string">'Hello Docker!'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">server.<span class="built_in">listen</span>(<span class="number">3000</span>)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// å¯åŠ¨ server</div><div class="line">$ node server.js</div></pre></td></tr></table></figure>
<p>è¿™æ ·å­æ•´ä¸ªæµç¨‹å°±è·‘é€šäº†ï¼Œåœ¨æµè§ˆå™¨é‡Œé¢è®¿é—® <code>http://localhost:8888</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°</p>
<p><img src="http://7xpbfd.com1.z0.glb.clouddn.com/docker.png" alt="http://7xpbfd.com1.z0.glb.clouddn.com/docker.png"></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜å¯ä»¥æŠŠè¿™ä¸ªä¿®æ”¹è¿‡çš„å®¹å™¨ä¿å­˜ä¸‹æ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// é€€å‡ºå®¹å™¨ç³»ç»Ÿ</div><div class="line">$ <span class="built_in">exit</span></div><div class="line"></div><div class="line">// æŸ¥çœ‹å®¹å™¨ä¿¡æ¯</div><div class="line">$ docker ps <span class="_">-a</span></div><div class="line"></div><div class="line">// å°†å®¹å™¨è½¬åŒ–æˆé•œåƒï¼Œppxu æ˜¯ Docker Hub ä¸Šçš„ç”¨æˆ·åï¼Œcnn æ˜¯é•œåƒåï¼Œv1 æ˜¯ä¸€ä¸ª tag</div><div class="line">$ docker commit -m <span class="string">'add nginx &amp; node to centos'</span> <span class="_">-a</span> <span class="string">'ppxu'</span> web ppxu/cnn:v1</div><div class="line"></div><div class="line">// æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ</div><div class="line">$ docker images</div><div class="line"></div><div class="line">// è¿è¡Œåˆšåˆšä¿å­˜çš„é•œåƒ</div><div class="line">$ docker run -it -p 8888:80 ppxu/cnn:v1</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªå®¹å™¨ä¸­å¯ä»¥çœ‹åˆ°åˆšåˆšå®‰è£…çš„ nginx å’Œ node.js éƒ½æ­£å¸¸è¿è¡Œã€‚</p>
<p>æœ€åæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªé•œåƒä¸Šä¼ åˆ° Docker Hub ä¸­ï¼Œé¦–å…ˆ <a href="https://hub.docker.com/" target="_blank" rel="external">æ³¨å†Œå¸å·</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// ç”¨åˆšæ³¨å†Œçš„å¸å·ç™»å½•</div><div class="line">$ docker login</div><div class="line"></div><div class="line">// ä¸Šä¼ é•œåƒ</div><div class="line">$ docker push ppxu/cnn:v1</div></pre></td></tr></table></figure>
<p>ç„¶åå°±å¯ä»¥åœ¨ <a href="https://hub.docker.com/" target="_blank" rel="external">Docker Hub</a> ä¸Šçœ‹åˆ°åˆšæ‰ä¸Šä¼ çš„é•œåƒäº†ï¼Œå…¶ä»–äººå°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒäº†ã€‚</p>
<h4 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™">Â¶</a>å‚è€ƒèµ„æ–™</h4>
<ul>
<li><a href="https://docs.docker.com/engine/getstarted/" target="_blank" rel="external">https://docs.docker.com/engine/getstarted/</a></li>
<li><a href="http://blog.saymagic.cn/2015/06/01/learning-docker.html#bqlkp" target="_blank" rel="external">http://blog.saymagic.cn/2015/06/01/learning-docker.html#bqlkp</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®€å•è®°å½•ä¸€ä¸‹å¦‚ä½•åœ¨ Mac ä¸Šä½¿ç”¨ Dockerï¼Œå¹¶é…ç½® nginx å’Œ node.js å¼€å‘ç¯å¢ƒçš„æ“ä½œæ­¥éª¤ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="centos" scheme="https://ppxu.me/tags/centos/"/>
    
      <category term="nginx" scheme="https://ppxu.me/tags/nginx/"/>
    
      <category term="mac" scheme="https://ppxu.me/tags/mac/"/>
    
      <category term="docker" scheme="https://ppxu.me/tags/docker/"/>
    
      <category term="nodejs" scheme="https://ppxu.me/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šå®‰è£…ShadowSocksæœåŠ¡</title>
    <link href="https://ppxu.me/2016/03/29/install-shadowsocks-service/"/>
    <id>https://ppxu.me/2016/03/29/install-shadowsocks-service/</id>
    <published>2016-03-29T06:55:04.000Z</published>
    <updated>2016-03-29T13:40:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ç§‘å­¦ä¸Šç½‘å·¥å…·ShadowSocksï¼Œå› ä¸ºæ²¡æœ‰å›½å¤–çš„ä¸»æœºï¼Œåªå¥½æ‹¿é˜¿é‡Œäº‘è¯•è¯•æ‰‹ã€‚</p>
<a id="more"></a>
<h3 id="å®‰è£…shadowsocks"><a class="header-anchor" href="#å®‰è£…shadowsocks">Â¶</a>å®‰è£…shadowsocks</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ yum install epel-release</div><div class="line">$ yum update</div><div class="line">$ yum install python-setuptools</div><div class="line">$ easy_install pip</div><div class="line">$ pip install shadowsocks</div></pre></td></tr></table></figure>
<h3 id="é…ç½®shadowsocks"><a class="header-anchor" href="#é…ç½®shadowsocks">Â¶</a>é…ç½®shadowsocks</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vi /etc/shadowsocks.json</div></pre></td></tr></table></figure>
<p>è¾“å…¥ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"server"</span>: <span class="string">"0.0.0.0"</span>,</div><div class="line">  <span class="attr">"server_port"</span>: ç«¯å£å·,</div><div class="line">  <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</div><div class="line">  <span class="attr">"local_port"</span>: <span class="number">1080</span>,</div><div class="line">  <span class="attr">"password"</span>:<span class="string">" ä½ çš„å¯†ç "</span>,</div><div class="line">  <span class="attr">"timeout"</span>: <span class="number">500</span>,</div><div class="line">  <span class="attr">"method"</span>:<span class="string">" aes-256-cfb"</span>,</div><div class="line">  <span class="attr">"fast_open"</span>: <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å¯åŠ¨æœåŠ¡"><a class="header-anchor" href="#å¯åŠ¨æœåŠ¡">Â¶</a>å¯åŠ¨æœåŠ¡</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ yum install python-setuptools supervisor</div><div class="line">$ easy_install pip</div><div class="line">$ pip install shadowsocks</div></pre></td></tr></table></figure>
<p>åŠ å…¥è‡ªåŠ¨å¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vi /etc/supervisord.conf</div></pre></td></tr></table></figure>
<p>åœ¨æœ€åè¾“å…¥</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="section">[program:shadowsocks]</span></div><div class="line"><span class="attr">command</span>=ssserver -c /etc/shadowsocks.json</div><div class="line"><span class="attr">autostart</span>=<span class="literal">true</span></div><div class="line"><span class="attr">autorestart</span>=<span class="literal">true</span></div><div class="line"><span class="attr">user</span>=root</div></pre></td></tr></table></figure>
<p>åˆ·æ–°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ sudo chkconfig --add supervisord</div><div class="line">$ sudo chkconfig supervisord on</div><div class="line">$ service supervisord start</div><div class="line">$ supervisorctl reload</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œé‡å¯ä¸€ä¸‹æœåŠ¡å™¨å³å¯ï¼Œæ›´å¤šçš„ä¼˜åŒ–æ‰‹æ®µå¯ä»¥å‚è€ƒä¸‹é¢é“¾æ¥ã€‚</p>
<h4 id="å‚è€ƒ"><a class="header-anchor" href="#å‚è€ƒ">Â¶</a>å‚è€ƒ</h4>
<ul>
<li><a href="http://www.linexy.net/archives/digitalocean-build-shadowsocks-services-and-optimization-program/" target="_blank" rel="external">http://www.linexy.net/archives/digitalocean-build-shadowsocks-services-and-optimization-program/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®°å½•ä¸€ä¸‹å¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ç§‘å­¦ä¸Šç½‘å·¥å…·ShadowSocksï¼Œå› ä¸ºæ²¡æœ‰å›½å¤–çš„ä¸»æœºï¼Œåªå¥½æ‹¿é˜¿é‡Œäº‘è¯•è¯•æ‰‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="aliyun" scheme="https://ppxu.me/tags/aliyun/"/>
    
      <category term="ecs" scheme="https://ppxu.me/tags/ecs/"/>
    
      <category term="centos" scheme="https://ppxu.me/tags/centos/"/>
    
      <category term="shadowsocks" scheme="https://ppxu.me/tags/shadowsocks/"/>
    
  </entry>
  
  <entry>
    <title>Electronå¿«é€Ÿä¸Šæ‰‹ï¼ˆè¯‘ï¼‰</title>
    <link href="https://ppxu.me/2016/01/31/introduce-to-electron/"/>
    <id>https://ppxu.me/2016/01/31/introduce-to-electron/</id>
    <published>2016-01-31T13:20:40.000Z</published>
    <updated>2016-02-01T15:18:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>Electronå¯ä»¥è®©ä½ ä½¿ç”¨çº¯JavaScriptåˆ›å»ºæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåŒ…å«ä¸°å¯Œçš„åŸç”Ÿï¼ˆæ“ä½œç³»ç»Ÿï¼‰APIçš„è¿è¡Œæ—¶ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªNode.jsè¿è¡Œæ—¶çš„å˜ä½“ï¼Œåªä¸è¿‡å®ƒæ˜¯ä¸“æ³¨äºæ¡Œé¢åº”ç”¨ç¨‹åºè€Œä¸æ˜¯webæœåŠ¡å™¨ã€‚</p>
<p>è¿™å¹¶ä¸æ˜¯è¯´Electronæ˜¯ä¸€ä¸ªæ“ä½œå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰åº“çš„JavaScriptå·¥å…·ï¼Œå®é™…ä¸Šï¼ŒElectronä½¿ç”¨ç½‘é¡µä½œä¸ºå®ƒçš„GUIï¼Œå› æ­¤ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªç²¾ç®€ç‰ˆçš„Chromiumæµè§ˆå™¨ï¼Œé€šè¿‡JavaScriptæ¥æ§åˆ¶ã€‚</p>
<a id="more"></a>
<h3 id="ä¸»è¿›ç¨‹"><a class="header-anchor" href="#ä¸»è¿›ç¨‹">Â¶</a>ä¸»è¿›ç¨‹</h3>
<p>åœ¨Electronä¸­ï¼Œè¿è¡Œ<code>package.json</code>ä¸­çš„<code>main</code>è„šæœ¬çš„è¿›ç¨‹å«ä½œä¸»è¿›ç¨‹ï¼ˆthe main processï¼‰ã€‚ä¸»è¿›ç¨‹ä¸­è¿è¡Œçš„è„šæœ¬å¯ä»¥é€šè¿‡åˆ›å»ºç½‘é¡µæ¥æ˜¾ç¤ºä¸€ä¸ªGUIç•Œé¢ã€‚</p>
<h3 id="æ¸²æŸ“è¿›ç¨‹"><a class="header-anchor" href="#æ¸²æŸ“è¿›ç¨‹">Â¶</a>æ¸²æŸ“è¿›ç¨‹</h3>
<p>ç”±äºElectronä½¿ç”¨Chromiumæ¥æ˜¾ç¤ºç½‘é¡µï¼ŒChromiumçš„å¤šçº¿ç¨‹æ¶æ„ä¹Ÿç”¨åˆ°äº†ã€‚Electronä¸­çš„æ¯ä¸€ä¸ªç½‘é¡µéƒ½åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ä¸­è¿è¡Œï¼Œå³æ¸²æŸ“è¿›ç¨‹ï¼ˆthe renderer processï¼‰ã€‚</p>
<p>åœ¨æ™®é€šçš„æµè§ˆå™¨ä¸­ï¼Œç½‘é¡µé€šå¸¸æ˜¯åœ¨ä¸€ä¸ªæ²™ç®±ç¯å¢ƒä¸­è¿è¡Œï¼Œä¸å…è®¸è®¿é—®æœ¬åœ°èµ„æºã€‚ä¸è¿‡ä½¿ç”¨Electronå°±å¯ä»¥åœ¨ç½‘é¡µä¸­åˆ©ç”¨Node.jsçš„APIæ¥å®ç°ä¸€äº›åˆçº§çš„æ“ä½œç³»ç»Ÿäº¤äº’ã€‚</p>
<h3 id="ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„åŒºåˆ«"><a class="header-anchor" href="#ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„åŒºåˆ«">Â¶</a>ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„åŒºåˆ«</h3>
<p>ä¸»è¿›ç¨‹é€šè¿‡åˆ›å»º<code>BrowserWindow</code>å®ä¾‹æ¥ç”Ÿæˆç½‘é¡µï¼Œæ¯ä¸ª<code>BrowserWindow</code>å®ä¾‹åœ¨å®ƒè‡ªå·±çš„æ¸²æŸ“è¿›ç¨‹ä¸­è¿è¡Œç½‘é¡µã€‚å½“ä¸€ä¸ª<code>BrowserWindow</code>å®ä¾‹é”€æ¯æ—¶ï¼Œå¯¹åº”çš„æ¸²æŸ“è¿›ç¨‹ä¹Ÿè¢«ç»ˆæ­¢ã€‚</p>
<p>ä¸»è¿›ç¨‹ç®¡ç†æ‰€æœ‰çš„ç½‘é¡µå’Œå®ƒä»¬ç›¸å¯¹åº”çš„æ¸²æŸ“è¿›ç¨‹ï¼Œæ¯ä¸ªæ¸²æŸ“è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œåªé¡»å…³å¿ƒåœ¨å®ƒä¸Šé¢è¿è¡Œçš„ç½‘é¡µã€‚</p>
<p>åœ¨ç½‘é¡µä¸­è°ƒç”¨åŸç”Ÿçš„GUIç›¸å…³APIæ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºåœ¨ç½‘é¡µä¸­ç®¡ç†åŸç”ŸGUIèµ„æºæ˜¯ååˆ†å±é™©çš„ï¼Œå¾ˆå®¹æ˜“æ³„éœ²èµ„æºã€‚å¦‚æœä½ æƒ³åœ¨ç½‘é¡µä¸­æ“ä½œGUIï¼Œè¯¥ç½‘é¡µçš„æ¸²æŸ“è¿›ç¨‹å¿…é¡»è¦å’Œä¸»è¿›ç¨‹é€šä¿¡ï¼Œè¯·æ±‚åœ¨ä¸»è¿›ç¨‹ä¸Šè¿›è¡Œè¿™äº›æ“ä½œã€‚</p>
<p>åœ¨Electronä¸­ï¼Œæˆ‘ä»¬æä¾›äº†<a href="http://electron.atom.io/docs/v0.36.5/api/ipc-renderer" target="_blank" rel="external">ipc</a>æ¨¡å—ç”¨æ¥å®ç°ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ª<a href="http://electron.atom.io/docs/v0.36.5/api/remote" target="_blank" rel="external">remote</a>æ¨¡å—ç”¨æ¥åšRPCç±»å‹çš„é€šä¿¡ã€‚</p>
<h2 id="ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªelectronåº”ç”¨"><a class="header-anchor" href="#ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªelectronåº”ç”¨">Â¶</a>ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªElectronåº”ç”¨</h2>
<p>é€šå¸¸ä¸€ä¸ªElectronåº”ç”¨çš„ç»“æ„ç±»ä¼¼è¿™æ ·ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">your-app/</div><div class="line">â”œâ”€â”€ package<span class="selector-class">.json</span></div><div class="line">â”œâ”€â”€ main<span class="selector-class">.js</span></div><div class="line">â””â”€â”€ index.html</div></pre></td></tr></table></figure>
<p><code>package.json</code>çš„æ ¼å¼å’ŒNodeæ¨¡å—å®Œå…¨ä¸€æ ·ï¼Œ<code>main</code>å­—æ®µæŒ‡å®šçš„è„šæœ¬å°±æ˜¯ä½ çš„åº”ç”¨çš„å¯åŠ¨è„šæœ¬ï¼Œå®ƒä¼šè¿è¡Œä¸»è¿›ç¨‹ã€‚ä¸€ä¸ª<code>package.json</code>å¯èƒ½ç±»ä¼¼è¿™æ ·ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>    : <span class="string">"your-app"</span>,</div><div class="line">  <span class="attr">"version"</span> : <span class="string">"0.1.0"</span>,</div><div class="line">  <span class="attr">"main"</span>    : <span class="string">"main.js"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœ<code>package.json</code>ä¸­æ²¡æœ‰æŒ‡å®š<code>main</code>å­—æ®µï¼ŒElectronä¼šå°è¯•åŠ è½½<code>index.js</code>ã€‚</p>
<p><code>main.js</code>éœ€è¦åˆ›å»ºçª—å£å¹¶ä¸”å¤„ç†ç³»ç»Ÿäº‹ä»¶ï¼Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> electron = <span class="built_in">require</span>(<span class="string">'electron'</span>);</div><div class="line"><span class="keyword">const</span> app = electron.app;  <span class="comment">// æ§åˆ¶åº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„æ¨¡å—.</span></div><div class="line"><span class="keyword">const</span> BrowserWindow = electron.BrowserWindow;  <span class="comment">// åˆ›å»ºåŸç”Ÿæµè§ˆå™¨çª—å£çš„æ¨¡å—.</span></div><div class="line"></div><div class="line"><span class="comment">// ä¿å­˜çª—å£å¯¹è±¡çš„ä¸€ä¸ªå…¨å±€å¼•ç”¨ï¼Œå¦‚æœä½ ä¸è¿™ä¹ˆåšï¼Œå½“JavaScriptå¯¹è±¡è¢«åƒåœ¾å›æ”¶åçª—å£ä¼šè‡ªåŠ¨å…³é—­</span></div><div class="line"><span class="keyword">var</span> mainWindow = <span class="literal">null</span>;</div><div class="line"></div><div class="line"><span class="comment">// å½“æ‰€æœ‰çª—å£å…³é—­åé€€å‡ºåº”ç”¨</span></div><div class="line">app.on(<span class="string">'window-all-closed'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// åœ¨OSXé€šå¸¸ä¼šè®©åº”ç”¨å’Œå®ƒçš„èœå•æ ä¿æŒæ¿€æ´»ç›´åˆ°ç”¨æˆ·ä½¿ç”¨Cmd+Qå¼ºåˆ¶é€€å‡º</span></div><div class="line">  <span class="keyword">if</span> (process.platform != <span class="string">'darwin'</span>) &#123;</div><div class="line">    app.quit();</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•ä¼šåœ¨Electronå®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡å¥½åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è°ƒç”¨</span></div><div class="line">app.on(<span class="string">'ready'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// åˆ›å»ºæµè§ˆå™¨çª—å£</span></div><div class="line">  mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;width: <span class="number">800</span>, height: <span class="number">600</span>&#125;);</div><div class="line"></div><div class="line">  <span class="comment">// åŠ è½½åº”ç”¨çš„index.html</span></div><div class="line">  mainWindow.loadURL(<span class="string">'file://'</span> + __dirname + <span class="string">'/index.html'</span>);</div><div class="line"></div><div class="line">  <span class="comment">// æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆchromiumçš„æ§åˆ¶å°ï¼‰</span></div><div class="line">  mainWindow.webContents.openDevTools();</div><div class="line"></div><div class="line">  <span class="comment">// å½“çª—å£å…³é—­æ—¶è§¦å‘</span></div><div class="line">  mainWindow.on(<span class="string">'closed'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// å–æ¶ˆå¯¹çª—å£å¯¹è±¡çš„å¼•ç”¨ï¼Œé€šå¸¸å¦‚æœä½ çš„åº”ç”¨æ”¯æŒå¤šçª—å£ï¼Œä½ ä¼šå°†çª—å£å­˜åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼Œè¿™æ—¶å€™ä½ åº”å½“åˆ é™¤å¯¹åº”çš„å…ƒç´ </span></div><div class="line">    mainWindow = <span class="literal">null</span>;</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æœ€åè¿™ä¸ª<code>index.html</code>å°±æ˜¯ä½ æƒ³è¦å±•ç°çš„ç½‘é¡µï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    We are using node <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">document</span>.write(process.versions.node)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>,</div><div class="line">    Chrome <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">document</span>.write(process.versions.chrome)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>,</div><div class="line">    and Electron <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">document</span>.write(process.versions.electron)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>.</div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="è¿è¡Œä½ çš„åº”ç”¨"><a class="header-anchor" href="#è¿è¡Œä½ çš„åº”ç”¨">Â¶</a>è¿è¡Œä½ çš„åº”ç”¨</h2>
<p>å½“ä½ åˆ›å»ºå®Œæœ€åˆçš„<code>main.js</code>ï¼Œ<code>index.html</code>å’Œ<code>package.json</code>æ–‡ä»¶ï¼Œä½ è‚¯å®šè¿«ä¸åŠå¾…æƒ³è¦åœ¨æœ¬åœ°å°è¯•è·‘ä¸€ä¸‹ä½ çš„åº”ç”¨ï¼Œçœ‹çœ‹å®ƒæ˜¯ä¸æ˜¯åƒé¢„æœŸé‚£æ ·çš„è¿è¡Œã€‚</p>
<h3 id="electron-prebuilt"><a class="header-anchor" href="#electron-prebuilt">Â¶</a>electron-prebuilt</h3>
<p>å¦‚æœä½ é€šè¿‡<code>npm</code>å…¨å±€å®‰è£…äº†<code>electron-prebuilt</code>ï¼Œä½ åªéœ€è¦åœ¨ä½ çš„åº”ç”¨ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">electron .</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ˜¯å±€éƒ¨å®‰è£…çš„ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./node_modules/.bin/electron .</div></pre></td></tr></table></figure>
<h3 id="æ‰‹åŠ¨ä¸‹è½½çš„electronç¨‹åº"><a class="header-anchor" href="#æ‰‹åŠ¨ä¸‹è½½çš„electronç¨‹åº">Â¶</a>æ‰‹åŠ¨ä¸‹è½½çš„Electronç¨‹åº</h3>
<p>å¦‚æœä½ æ˜¯æ‰‹åŠ¨ä¸‹è½½çš„Electronï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œä½ çš„åº”ç”¨ã€‚</p>
<h4 id="windows"><a class="header-anchor" href="#windows">Â¶</a>Windows</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ .\electron\electron.exe your-app\</div></pre></td></tr></table></figure>
<h4 id="linux"><a class="header-anchor" href="#linux">Â¶</a>Linux</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./electron/electron your-app/</div></pre></td></tr></table></figure>
<h4 id="osx"><a class="header-anchor" href="#osx">Â¶</a>OSX</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./Electron.app/Contents/MacOS/Electron your-app/</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>Electron.app</code>æ˜¯Electronå‘è¡ŒåŒ…ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä½ å¯ä»¥åœ¨<a href="https://github.com/atom/electron/releases" target="_blank" rel="external">è¿™é‡Œ</a>ä¸‹è½½ã€‚</p>
<h3 id="å‘å¸ƒåº”ç”¨"><a class="header-anchor" href="#å‘å¸ƒåº”ç”¨">Â¶</a>å‘å¸ƒåº”ç”¨</h3>
<p>å½“ä½ å®Œæˆäº†åº”ç”¨çš„å¼€å‘ï¼Œä½ å¯ä»¥æ ¹æ®<a href="http://electron.atom.io/docs/v0.36.5/tutorial/application-distribution" target="_blank" rel="external">åº”ç”¨å‘å¸ƒ</a>æŒ‡å—æ¥åˆ›å»ºä¸€ä¸ªå‘å¸ƒï¼Œå¹¶æ‰§è¡Œæ‰“åŒ…ç¨‹åºã€‚</p>
<h3 id="å°è¯•è¿™ä¸ªä¾‹å­"><a class="header-anchor" href="#å°è¯•è¿™ä¸ªä¾‹å­">Â¶</a>å°è¯•è¿™ä¸ªä¾‹å­</h3>
<p>åœ¨<a href="https://github.com/atom/electron-quick-start" target="_blank" rel="external">atom/electron-quick-start</a>ä¸‹è½½å¹¶è¿è¡Œè¿™ä¸ªæ•™ç¨‹çš„ä»£ç ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šè¿è¡Œä»£ç éœ€è¦ç³»ç»Ÿæ”¯æŒ<a href="https://git-scm.com/" target="_blank" rel="external">Git</a>å’Œ<a href="https://nodejs.org/en/download/" target="_blank" rel="external">Node.js</a>ï¼ˆå«<a href="https://npmjs.org/" target="_blank" rel="external">npm</a>ï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Clone the repository</span></div><div class="line">$ git <span class="built_in">clone</span> https://github.com/atom/electron-quick-start</div><div class="line"><span class="comment"># Go into the repository</span></div><div class="line">$ <span class="built_in">cd</span> electron-quick-start</div><div class="line"><span class="comment"># Install dependencies and run the app</span></div><div class="line">$ npm install &amp;&amp; npm start</div></pre></td></tr></table></figure>
<p><strong>åŸæ–‡åœ°å€</strong>ï¼š<a href="http://electron.atom.io/docs/latest/tutorial/quick-start/" target="_blank" rel="external">http://electron.atom.io/docs/latest/tutorial/quick-start/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Electronå¯ä»¥è®©ä½ ä½¿ç”¨çº¯JavaScriptåˆ›å»ºæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåŒ…å«ä¸°å¯Œçš„åŸç”Ÿï¼ˆæ“ä½œç³»ç»Ÿï¼‰APIçš„è¿è¡Œæ—¶ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªNode.jsè¿è¡Œæ—¶çš„å˜ä½“ï¼Œåªä¸è¿‡å®ƒæ˜¯ä¸“æ³¨äºæ¡Œé¢åº”ç”¨ç¨‹åºè€Œä¸æ˜¯webæœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¹¶ä¸æ˜¯è¯´Electronæ˜¯ä¸€ä¸ªæ“ä½œå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰åº“çš„JavaScriptå·¥å…·ï¼Œå®é™…ä¸Šï¼ŒElectronä½¿ç”¨ç½‘é¡µä½œä¸ºå®ƒçš„GUIï¼Œå› æ­¤ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªç²¾ç®€ç‰ˆçš„Chromiumæµè§ˆå™¨ï¼Œé€šè¿‡JavaScriptæ¥æ§åˆ¶ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="nodejs" scheme="https://ppxu.me/categories/nodejs/"/>
    
    
      <category term="nodejs" scheme="https://ppxu.me/tags/nodejs/"/>
    
      <category term="electron" scheme="https://ppxu.me/tags/electron/"/>
    
      <category term="atom" scheme="https://ppxu.me/tags/atom/"/>
    
      <category term="chromium" scheme="https://ppxu.me/tags/chromium/"/>
    
      <category term="app" scheme="https://ppxu.me/tags/app/"/>
    
  </entry>
  
  <entry>
    <title>è®©Hexoæ”¯æŒemojiè¡¨æƒ…</title>
    <link href="https://ppxu.me/2015/12/24/enable-emoji-in-hexo/"/>
    <id>https://ppxu.me/2015/12/24/enable-emoji-in-hexo/</id>
    <published>2015-12-24T13:23:43.000Z</published>
    <updated>2015-12-26T14:07:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>Hexoçš„æ–‡ç« å†…å®¹é»˜è®¤æ˜¯ä¸æ”¯æŒemojiè¡¨æƒ…çš„ï¼Œä½œä¸ºä¸€ä¸ªæœ‰é€¼æ ¼çš„ç å†œï¼Œæ€ä¹ˆå°‘å¾—äº†ä¸°å¯Œçš„è¡¨æƒ…è¯­è¨€ï¼Œä»Šå¤©å°±ç ”ç©¶äº†ä¸‹æ€ä¹ˆæ”¯æŒemojiã€‚</p>
<a id="more"></a>
<p>Hexoé»˜è®¤çš„markdownç¼–è¯‘æ’ä»¶æ˜¯<a href="https://github.com/hexojs/hexo-renderer-marked" target="_blank" rel="external">hexo-renderer-marked</a>ï¼Œçœ‹äº†ä¸€ä¸‹ç›¸å…³æ–‡æ¡£ï¼Œå¥½åƒæ²¡åŠæ³•æ”¯æŒemojiï¼Œè¿˜å¥½åœ¨Hexoçš„<a href="https://hexo.io/plugins/" target="_blank" rel="external">plugins</a>é¡µï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å¦å¤–ä¸€ä¸ªmarkdownæ’ä»¶<a href="https://github.com/celsomiranda/hexo-renderer-markdown-it" target="_blank" rel="external">hexo-renderer-markdown-it</a>ï¼Œè€Œä¸”å·ç§°é€Ÿåº¦æ¯”é»˜è®¤çš„è¿˜è¦å¿«ï¼Œæœ€ä¸»è¦çš„æ˜¯ï¼Œåœ¨<a href="https://github.com/markdown-it/markdown-it" target="_blank" rel="external">markdown-it</a>çš„æ–‡æ¡£é‡Œé¢ï¼Œæˆ‘ä»¬å‘ç°å®ƒå¯ä»¥é€šè¿‡pluginsçš„æ–¹å¼æ”¯æŒ<a href="https://github.com/markdown-it/markdown-it-emoji" target="_blank" rel="external">emoji</a>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±æ¥æ›¿æ¢markdownæ’ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> /ppxu/blog/</div><div class="line">$ npm un hexo-renderer-marked --save</div><div class="line">$ npm i hexo-renderer-markdown-it --save</div></pre></td></tr></table></figure>
<p>ä¸è¿‡æ­¤æ—¶çš„hexo-renderer-markdown-itè¿˜æ˜¯ç”¨ä¸äº†emojiçš„ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šemojiçš„plugin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> node_modules/hexo-renderer-markdown-it/</div><div class="line">$ npm install markdown-it-emoji --save</div></pre></td></tr></table></figure>
<p>ç„¶åç¼–è¾‘Hexoçš„é…ç½®æ–‡ä»¶<code>_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="attr">markdown:</span></div><div class="line"><span class="attr">  render:</span></div><div class="line"><span class="attr">    html:</span> <span class="literal">true</span></div><div class="line"><span class="attr">    xhtmlOut:</span> <span class="literal">false</span></div><div class="line"><span class="attr">    breaks:</span> <span class="literal">false</span></div><div class="line"><span class="attr">    linkify:</span> <span class="literal">true</span></div><div class="line"><span class="attr">    typographer:</span> <span class="literal">true</span></div><div class="line"><span class="attr">    quotes:</span> <span class="string">'â€œâ€â€˜â€™'</span></div><div class="line"><span class="attr">  plugins:</span></div><div class="line"><span class="bullet">    -</span> markdown-it-footnote</div><div class="line"><span class="bullet">    -</span> markdown-it-sup</div><div class="line"><span class="bullet">    -</span> markdown-it-sub</div><div class="line"><span class="bullet">    -</span> markdown-it-abbr</div><div class="line"><span class="bullet">    -</span> markdown-it-emoji</div><div class="line"><span class="attr">  anchors:</span></div><div class="line"><span class="attr">    level:</span> <span class="number">2</span></div><div class="line"><span class="attr">    collisionSuffix:</span> <span class="string">'v'</span></div><div class="line"><span class="attr">    permalink:</span> <span class="literal">true</span></div><div class="line"><span class="attr">    permalinkClass:</span> header-anchor</div><div class="line"><span class="attr">    permalinkSymbol:</span> Â¶</div></pre></td></tr></table></figure>
<p>å…³é”®å°±æ˜¯åœ¨pluginsé‡ŒåŠ ä¸Š<code>- markdown-it-emoji</code>ï¼Œå…¶ä»–çš„é…ç½®è¯´æ˜å¯ä»¥å‚è§<a href="https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki/Advanced-Configuration" target="_blank" rel="external">wiki</a>ã€‚</p>
<p>é‡å¯HexoæœåŠ¡ï¼Œå³å¯ç”Ÿæ•ˆï¼Œè¿™é‡Œè¾“å…¥<code>:smile: :smirk: :relieved:</code>ï¼Œæ•ˆæœ ğŸ˜„ ğŸ˜ ğŸ˜Œ</p>
<p>å½“ç„¶ç›´æ¥è¾“å…¥è¡¨æƒ…ä¹Ÿæ˜¯å¯ä»¥çš„ ğŸ˜‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexoçš„æ–‡ç« å†…å®¹é»˜è®¤æ˜¯ä¸æ”¯æŒemojiè¡¨æƒ…çš„ï¼Œä½œä¸ºä¸€ä¸ªæœ‰é€¼æ ¼çš„ç å†œï¼Œæ€ä¹ˆå°‘å¾—äº†ä¸°å¯Œçš„è¡¨æƒ…è¯­è¨€ï¼Œä»Šå¤©å°±ç ”ç©¶äº†ä¸‹æ€ä¹ˆæ”¯æŒemojiã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="hexo" scheme="https://ppxu.me/tags/hexo/"/>
    
      <category term="markdown" scheme="https://ppxu.me/tags/markdown/"/>
    
      <category term="emoji" scheme="https://ppxu.me/tags/emoji/"/>
    
  </entry>
  
  <entry>
    <title>å¹³æ»‘å‡çº§Nginxå¹¶é…ç½®HTTP/2</title>
    <link href="https://ppxu.me/2015/12/23/nginx-smooth-upgrade-and-config-http2/"/>
    <id>https://ppxu.me/2015/12/23/nginx-smooth-upgrade-and-config-http2/</id>
    <published>2015-12-23T04:47:40.000Z</published>
    <updated>2015-12-26T14:05:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰è¯´åˆ°SPDYå·²ç»è¢«HTTP/2ä¸Šä½äº†ï¼Œç»§ç»­ç”¨SPDYä¹Ÿä¸åˆé€‚ï¼Œä»Šå¤©å°±è¶ç©ºå‡çº§äº†æœ€æ–°çš„Nginxï¼Œå¹¶å¼€å¯äº†HTTP/2ï¼Œæ“ä½œè¿‡ç¨‹å¦‚ä¸‹</p>
<a id="more"></a>
<ol>
<li>æ£€æŸ¥å½“å‰Nginxç‰ˆæœ¬å’Œé…ç½®å‚æ•°</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ nginx -V</div><div class="line">nginx version: nginx/1.8.0</div><div class="line">built by gcc 4.8.2 20140120 (Red Hat 4.8.2-16) (GCC)</div><div class="line">built with OpenSSL 1.0.1e-fips 11 Feb 2013</div><div class="line">TLS SNI support enabled</div><div class="line">configure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/<span class="built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="built_in">log</span>/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-openssl=../libressl-2.2.2 --with-http_v2_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --with-http_spdy_module --with-cc-opt=<span class="string">'-O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic'</span></div></pre></td></tr></table></figure>
<p>è®°ä¸‹è¿™é‡Œçš„configure argumentsï¼Œåé¢ç¼–è¯‘çš„æ—¶å€™è¦ç”¨çš„ã€‚</p>
<ol start="2">
<li>å®‰è£…PCREï¼ŒNginxçš„rewriteæ¨¡å—ä¾èµ–PCRE</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> /ppxu</div><div class="line">$ yum -y install make zlib zlib-devel gcc-c++ libtool</div><div class="line">$ wget http://nchc.dl.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz</div><div class="line">$ tar zxvf pcre-8.37.tar.gz</div><div class="line">$ <span class="built_in">cd</span> pcre-8.37/</div><div class="line">$ ./configure</div><div class="line">$ make &amp;&amp; make install</div></pre></td></tr></table></figure>
<ol start="3">
<li>ä¸‹è½½OpenSSLï¼Œå¯ä»¥ä»<a href="https://www.openssl.org/" target="_blank" rel="external">OpenSSL</a>æˆ–è€…<a href="http://www.libressl.org/" target="_blank" rel="external">LibreSSL</a>ä¸‹è½½</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> /ppxu</div><div class="line">$ wget http://ftp.openbsd.org/pub/OpenBSD/LibreSSL/libressl-2.3.1.tar.gz</div><div class="line">$ tar zxvf libressl-2.3.1.tar.gz</div></pre></td></tr></table></figure>
<ol start="4">
<li>ä¸‹è½½ï¼Œé…ç½®å¹¶ç¼–è¯‘Nginx</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> /ppxu</div><div class="line">$ wget http://nginx.org/download/nginx-1.9.9.tar.gz</div><div class="line">$ tar zxvf nginx-1.9.9.tar.gz</div><div class="line">$ <span class="built_in">cd</span> nginx-1.9.9/</div><div class="line">$ ./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/<span class="built_in">log</span>/nginx/error.log --http-log-path=/var/<span class="built_in">log</span>/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-openssl=../libressl-2.3.1 --with-http_v2_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --with-cc-opt=<span class="string">'-O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic'</span></div><div class="line">$ make</div></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„<code>--with-http_v2_module</code>å°±æ˜¯å¼€å¯HTTP/2çš„è®¾ç½®ã€‚</p>
<ol start="5">
<li>æ›¿æ¢Nginx</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">which</span> nginx    //æŸ¥æ‰¾nginxè·¯å¾„</div><div class="line">$ mv /usr/sbin/nginx /usr/sbin/nginx.old    //å¤‡ä»½æ—§ç‰ˆnginx</div><div class="line">$ cp objs/nginx /usr/sbin/    //å°†ç¼–è¯‘å¥½çš„æ–°ç‰ˆnginxå¤åˆ¶è¿‡å»</div></pre></td></tr></table></figure>
<ol start="6">
<li>ç¡®è®¤æ›´æ–°ç”Ÿæ•ˆ</li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ /usr/sbin/nginx -t</div><div class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</div><div class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</div><div class="line">$ /usr/sbin/nginx -v</div><div class="line">nginx version: nginx/1.9.9</div></pre></td></tr></table></figure>
<ol start="7">
<li>æ›´æ–°Nginxé…ç½®æ–‡ä»¶</li>
</ol>
  <figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    <span class="section">listen</span>       <span class="number">80</span>;</div><div class="line">    <span class="section">listen</span>       <span class="number">443</span> ssl http2;</div><div class="line">    server_name  ppxu.me *.ppxu.me;</div><div class="line"></div><div class="line">    ...</div></pre></td></tr></table></figure>
<ol start="8">
<li>é‡å¯Nginxå³å¯</li>
</ol>
<p>è®¿é—®ç½‘ç«™ï¼Œåœ¨å“åº”å¤´é‡Œå¯ä»¥çœ‹åˆ°<code>server:nginx/1.9.9</code>ï¼ŒåŒæ—¶ï¼Œåœ¨<a href="chrome://net-internals/#http2" target="_blank" rel="external">chrome://net-internals/#http2</a>ä¸Šé¢å¯ä»¥çœ‹åˆ°ç½‘ç«™å·²ç»æ”¯æŒäº†HTTP/2</p>
<p><img src="http://7xpbfd.com1.z0.glb.clouddn.com/http2.png" alt="http://7xpbfd.com1.z0.glb.clouddn.com/http2.png"></p>
<h4 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™">Â¶</a>å‚è€ƒèµ„æ–™</h4>
<ul>
<li><a href="http://www.linuxde.net/2011/08/554.html" target="_blank" rel="external">http://www.linuxde.net/2011/08/554.html</a></li>
<li><a href="http://www.linuxidc.com/Linux/2014-02/96137.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2014-02/96137.htm</a></li>
<li><a href="http://www.poluoluo.com/server/201403/265778.html" target="_blank" rel="external">http://www.poluoluo.com/server/201403/265778.html</a></li>
<li><a href="https://imququ.com/post/http2-resource.html" target="_blank" rel="external">https://imququ.com/post/http2-resource.html</a></li>
<li><a href="https://imququ.com/post/nginx-http2-patch.html" target="_blank" rel="external">https://imququ.com/post/nginx-http2-patch.html</a></li>
<li><a href="http://www.tuicool.com/articles/3eeIVfi" target="_blank" rel="external">http://www.tuicool.com/articles/3eeIVfi</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰è¯´åˆ°SPDYå·²ç»è¢«HTTP/2ä¸Šä½äº†ï¼Œç»§ç»­ç”¨SPDYä¹Ÿä¸åˆé€‚ï¼Œä»Šå¤©å°±è¶ç©ºå‡çº§äº†æœ€æ–°çš„Nginxï¼Œå¹¶å¼€å¯äº†HTTP/2ï¼Œæ“ä½œè¿‡ç¨‹å¦‚ä¸‹&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="aliyun" scheme="https://ppxu.me/tags/aliyun/"/>
    
      <category term="ecs" scheme="https://ppxu.me/tags/ecs/"/>
    
      <category term="centos" scheme="https://ppxu.me/tags/centos/"/>
    
      <category term="nginx" scheme="https://ppxu.me/tags/nginx/"/>
    
      <category term="http2" scheme="https://ppxu.me/tags/http2/"/>
    
  </entry>
  
  <entry>
    <title>Nginxé…ç½®SPDY</title>
    <link href="https://ppxu.me/2015/12/22/config-spdy-in-nginx/"/>
    <id>https://ppxu.me/2015/12/22/config-spdy-in-nginx/</id>
    <published>2015-12-22T09:32:20.000Z</published>
    <updated>2015-12-26T14:03:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ¥å‡†å¤‡ç»™æœåŠ¡å™¨æä¸ªHTTP/2ä¸Šå»ï¼Œå‘ç°Nginxè¦åˆ°1.9.5æ‰å¯ä»¥æ”¯æŒHTTP/2åè®®ï¼Œç°åœ¨æœåŠ¡å™¨ä¸Šçš„Nginxç‰ˆæœ¬æ‰1.8.0ï¼Œæƒ³äº†æƒ³å…ˆè¯•è¯•SPDYå§ï¼Œæ”¹å¤©å†æ¥å‡çº§Nginxå’ŒHTTP/2ã€‚</p>
<a id="more"></a>
<p>é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹æœ¬åœ°çš„Nginxæ˜¯ä¸æ˜¯å·²ç»åŒ…å«äº†SPDY</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ nginx -V |grep spdy</div></pre></td></tr></table></figure>
<p>å¦‚æœçœ‹åˆ°æœ‰<code>â€“-with-http_spdy_module</code>ï¼Œå°±è¯´æ˜å·²ç»æ”¯æŒäº†SPDYï¼Œå¦‚æœæ²¡æœ‰çš„è¯éœ€è¦é‡æ–°ä¸‹è½½å’Œç¼–è¯‘Nginxï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Š<code>--with-http_spdy_module</code>é€‰é¡¹ã€‚</p>
<p>ç„¶åä¿®æ”¹Nginxçš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       <span class="number">80</span>;</div><div class="line">    listen       <span class="number">443</span> ssl spdy;</div><div class="line">    server_name  ppxu.me *.ppxu.me;</div><div class="line"></div><div class="line">    add_header   Alternate-Protocol  <span class="number">443</span><span class="symbol">:npn-spdy/</span><span class="number">3.1</span>;</div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>é‡å¯Nginxï¼ŒSPDYå°±é…ç½®å®Œæˆäº†ã€‚</p>
<p>è®¿é—®ä¸€ä¸‹ç½‘ç«™ï¼Œç„¶ååœ¨chromeä¸­æ‰“å¼€<code>chrome://net-internals/#http2</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹å·²ç»æ”¯æŒäº†SPDY3.1</p>
<p><img src="http://7xpbfd.com1.z0.glb.clouddn.com/spdy.png" alt="http://7xpbfd.com1.z0.glb.clouddn.com/spdy.png"></p>
<p>è¿˜å¯ä»¥åœ¨è¿™ä¸ª<a href="https://spdycheck.org/" target="_blank" rel="external">ç½‘ç«™</a>æ£€æŸ¥SPDYæƒ…å†µã€‚</p>
<p>ä¸è¿‡æ¯•ç«ŸSPDYåè®®å·²ç»åºŸå¼ƒäº†ï¼Œè¿˜æ˜¯èµ¶ç´§æä¸ŠHTTP/2æ‰æ˜¯æ­£äº‹ã€‚</p>
<h4 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™">Â¶</a>å‚è€ƒèµ„æ–™</h4>
<ul>
<li>
<p><a href="http://nginx.org/" target="_blank" rel="external">http://nginx.org/</a></p>
</li>
<li>
<p><a href="http://www.stefanwille.com/2013/04/using-spdy-with-nginx-1-4/" target="_blank" rel="external">http://www.stefanwille.com/2013/04/using-spdy-with-nginx-1-4/</a></p>
</li>
<li>
<p><a href="http://www.linuxidc.com/Linux/2015-09/123251.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2015-09/123251.htm</a></p>
</li>
<li>
<p><a href="http://www.linuxidc.com/Linux/2015-02/112979.htm" target="_blank" rel="external">http://www.linuxidc.com/Linux/2015-02/112979.htm</a></p>
</li>
<li>
<p><a href="http://www.jb51.net/article/59017.htm" target="_blank" rel="external">http://www.jb51.net/article/59017.htm</a></p>
</li>
<li>
<p><a href="http://www.tuicool.com/articles/2mi63q" target="_blank" rel="external">http://www.tuicool.com/articles/2mi63q</a></p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ¥å‡†å¤‡ç»™æœåŠ¡å™¨æä¸ªHTTP/2ä¸Šå»ï¼Œå‘ç°Nginxè¦åˆ°1.9.5æ‰å¯ä»¥æ”¯æŒHTTP/2åè®®ï¼Œç°åœ¨æœåŠ¡å™¨ä¸Šçš„Nginxç‰ˆæœ¬æ‰1.8.0ï¼Œæƒ³äº†æƒ³å…ˆè¯•è¯•SPDYå§ï¼Œæ”¹å¤©å†æ¥å‡çº§Nginxå’ŒHTTP/2ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="aliyun" scheme="https://ppxu.me/tags/aliyun/"/>
    
      <category term="ecs" scheme="https://ppxu.me/tags/ecs/"/>
    
      <category term="centos" scheme="https://ppxu.me/tags/centos/"/>
    
      <category term="nginx" scheme="https://ppxu.me/tags/nginx/"/>
    
      <category term="spdy" scheme="https://ppxu.me/tags/spdy/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Githubçš„Webhookså®ç°Hexoçš„è‡ªåŠ¨éƒ¨ç½²</title>
    <link href="https://ppxu.me/2015/12/21/auto-deploy-hexo-with-github-webhooks/"/>
    <id>https://ppxu.me/2015/12/21/auto-deploy-hexo-with-github-webhooks/</id>
    <published>2015-12-21T09:29:24.000Z</published>
    <updated>2015-12-26T14:01:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>åšå®¢ä¹‹å‰çš„æ›´æ–°æ–¹å¼æ˜¯å…ˆåœ¨æœ¬åœ°å†™å¥½æ–‡ç« ï¼Œpushåˆ°Githubï¼Œç„¶åsshè¿åˆ°æœåŠ¡å™¨ä¸Šï¼Œå†pullä¸‹æ¥ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¦è¿™æ ·æ“ä½œä¸€éå®åœ¨éº»çƒ¦ï¼Œä»Šå¤©å°±è¯•ç€ç”¨Githubçš„WebhooksåŠŸèƒ½å®ç°äº†Hexoåšå®¢çš„è‡ªåŠ¨éƒ¨ç½²ï¼Œè¿‡ç¨‹è®°å½•å¦‚ä¸‹ã€‚</p>
<a id="more"></a>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸»è¦æœ‰ä¸¤ä¸ªç¯èŠ‚ï¼š</p>
<h3 id="æœ¬åœ°ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°github"><a class="header-anchor" href="#æœ¬åœ°ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°github">Â¶</a>æœ¬åœ°ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°Github</h3>
<p>Hexoæœ¬èº«å°±æœ‰deployåŠŸèƒ½ï¼Œåªè¦åœ¨<code>_config.yml</code>é‡Œé¢åšä¸€ä¸‹<a href="https://hexo.io/zh-cn/docs/deployment.html" target="_blank" rel="external">é…ç½®</a>ï¼Œå°±å¯ä»¥éƒ¨ç½²åˆ°Githubã€Herokuç­‰å¹³å°ä¸Šï¼Œå¦‚æœåšå®¢æ˜¯æ‰˜ç®¡åœ¨Github Pagesä¸Šçš„è¯ä½¿ç”¨è¿™ç§æ–¹å¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°è‡ªåŠ¨éƒ¨ç½²ï¼Œä¸è¿‡é€šè¿‡è¿™ç§æ–¹å¼å‘é€åˆ°Githubä¸Šçš„åªæœ‰<code>public</code>é™æ€æ–‡ä»¶ç›®å½•ï¼Œæˆ‘è¿™é‡Œå¸Œæœ›æ‰˜ç®¡æ•´ä¸ªåº”ç”¨çš„ä»£ç ï¼Œå°±ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼äº†ï¼Œåæ­£åªè¦å¯ä»¥pushå°±è¡Œäº†ï¼Œæˆ‘ä»¬æ¬å‡ºshellå¤§æ³•å¥½ã€‚</p>
<p>åˆ›å»ºæ–‡ä»¶<code>deploy.sh</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO DEPLOY] deploy hexo start \033[0m"</span></div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO DEPLOY] hexo generate...  \033[0m"</span></div><div class="line">hexo g</div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO DEPLOY] git commit...  \033[0m"</span></div><div class="line">d=`date +%x-%T`</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"auto deploy at "</span><span class="variable">$&#123;d&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO DEPLOY] git push...  \033[0m"</span></div><div class="line">git push origin master</div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO DEPLOY] deploy hexo finish \033[0m"</span></div></pre></td></tr></table></figure>
<p>ç„¶åå¢åŠ æƒé™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ chmod +x ./deploy.sh</div></pre></td></tr></table></figure>
<p>è¿™æ ·å®Œæˆæœ¬åœ°å¼€å‘åï¼Œåªè¦æ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./deploy.sh</div></pre></td></tr></table></figure>
<p>å°±å¯ä»¥è®©Hexoç”Ÿæˆé™æ€æ–‡ä»¶å¹¶pushåˆ°Githubä¸Šã€‚</p>
<h3 id="githubè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨"><a class="header-anchor" href="#githubè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨">Â¶</a>Githubè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨</h3>
<p>ä¸ºäº†è®©æœåŠ¡å™¨å¯ä»¥è‡ªåŠ¨åŒæ­¥Githubä¸Šé¢çš„æ›´æ–°ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°Githubçš„Webhooksã€‚</p>
<p>é¦–å…ˆåˆ›å»ºæ–‡ä»¶<code>sync.sh</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO SYNC] sync hexo start \033[0m"</span></div><div class="line"><span class="built_in">cd</span> /ppxu/blog</div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO SYNC] git pull...  \033[0m"</span></div><div class="line">git pull origin master</div><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"\033[32m [AUTO SYNC] sync hexo finish \033[0m"</span></div></pre></td></tr></table></figure>
<p>ç›®æ ‡æ˜¯æ¯å½“Githubæœ‰pushçš„æ—¶å€™å°±è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªè„šæœ¬ã€‚</p>
<p>ç„¶åæ‰¾åˆ°Githubä»“åº“çš„Settingsé¡µ</p>
<p><img src="http://7xpbfd.com1.z0.glb.clouddn.com/hook.png" alt="http://7xpbfd.com1.z0.glb.clouddn.com/hook.png"></p>
<p>æ·»åŠ ä¸€æ¡Webhookï¼Œå¡«å†™è¯·æ±‚åœ°å€<code>http://xx.xx.xx.xx:7777/webhook</code>ï¼Œè¿™æ ·æ¯å½“Githubæ”¶åˆ°pushæˆ–è€…å…¶ä»–äº‹ä»¶æ—¶å°±ä¼šè‡ªåŠ¨å‘è¿™ä¸ªåœ°å€å‘é€ä¸€æ¡POSTè¯·æ±‚ã€‚</p>
<p>ä¸‹é¢åœ¨æœåŠ¡å™¨ä¸Šè¡¥å……è¿™ä¸ªè¯·æ±‚åœ°å€ï¼Œæˆ‘ä»¬ç”¨Nodeæ­ä¸€ä¸ªç®€å•çš„httpæœåŠ¡ï¼Œè¿™é‡Œç”¨åˆ°äº†<a href="https://github.com/rvagg/github-webhook-handler" target="_blank" rel="external">github-webhook-handler</a>å¤„ç†hookæ¶ˆæ¯ï¼Œåˆ›å»ºæ–‡ä»¶<code>server.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</div><div class="line"><span class="keyword">var</span> exec = <span class="built_in">require</span>(<span class="string">'child_process'</span>).exec;</div><div class="line"><span class="keyword">var</span> createHandler = <span class="built_in">require</span>(<span class="string">'github-webhook-handler'</span>)</div><div class="line"><span class="keyword">var</span> handler = createHandler(&#123; path: <span class="string">'/webhook'</span>, secret: <span class="string">'********'</span> &#125;);</div><div class="line"></div><div class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  handler(req, res, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">    res.statusCode = <span class="number">404</span>;</div><div class="line">    res.end(<span class="string">'no such location'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;).listen(<span class="number">7777</span>);</div><div class="line"></div><div class="line">handler.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.error(<span class="string">'Error:'</span>, err.message);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">handler.on(<span class="string">'push'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Received a push event for %s to %s'</span>,</div><div class="line">    event.payload.repository.name,</div><div class="line">    event.payload.ref);</div><div class="line">  exec(<span class="string">'/ppxu/blog/sync.sh'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, stdout, stderr</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(err) &#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'sync server err: '</span> + stderr);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="built_in">console</span>.log(stdout);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>secret</code>è¦å’Œåœ¨Githubä¸Šæ–°å»ºhookæ—¶è®¾ç½®çš„ä¸€æ ·ï¼Œè¯·æ±‚æ—¶æ ¡éªŒç”¨çš„ã€‚</p>
<p>ç„¶åå¯åŠ¨æœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ node server.js &amp;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¹Ÿå¯ä»¥ç”¨foreverä¹‹ç±»çš„å·¥å…·é˜²æ­¢è¿›ç¨‹æŒ‚æ‰ã€‚</p>
<p>è¿™æ ·ä¸€å¥—è‡ªåŠ¨éƒ¨ç½²ç³»ç»Ÿå°±å»ºç«‹å¥½äº†ï¼Œåœ¨æœ¬æœºå’ŒæœåŠ¡å™¨çš„å®é™…æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="http://7xpbfd.com1.z0.glb.clouddn.com/deploy.png" alt="http://7xpbfd.com1.z0.glb.clouddn.com/deploy.png"></p>
<p><img src="http://7xpbfd.com1.z0.glb.clouddn.com/sync.png" alt="http://7xpbfd.com1.z0.glb.clouddn.com/sync.png"></p>
<p>æ„Ÿè§‰ç”Ÿæ´»ä¸€ä¸‹å­ç¾å¥½èµ·æ¥äº†å‘¢ï¼šï¼‰</p>
<h4 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™">Â¶</a>å‚è€ƒèµ„æ–™</h4>
<ul>
<li>
<p><a href="https://hexo.io/zh-cn/docs/deployment.html" target="_blank" rel="external">https://hexo.io/zh-cn/docs/deployment.html</a></p>
</li>
<li>
<p><a href="https://developer.github.com/webhooks/" target="_blank" rel="external">https://developer.github.com/webhooks/</a></p>
</li>
<li>
<p><a href="http://www.lovelucy.info/auto-deploy-website-by-webhooks-of-github-and-gitlab.html" target="_blank" rel="external">http://www.lovelucy.info/auto-deploy-website-by-webhooks-of-github-and-gitlab.html</a></p>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åšå®¢ä¹‹å‰çš„æ›´æ–°æ–¹å¼æ˜¯å…ˆåœ¨æœ¬åœ°å†™å¥½æ–‡ç« ï¼Œpushåˆ°Githubï¼Œç„¶åsshè¿åˆ°æœåŠ¡å™¨ä¸Šï¼Œå†pullä¸‹æ¥ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¦è¿™æ ·æ“ä½œä¸€éå®åœ¨éº»çƒ¦ï¼Œä»Šå¤©å°±è¯•ç€ç”¨Githubçš„WebhooksåŠŸèƒ½å®ç°äº†Hexoåšå®¢çš„è‡ªåŠ¨éƒ¨ç½²ï¼Œè¿‡ç¨‹è®°å½•å¦‚ä¸‹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="github" scheme="https://ppxu.me/tags/github/"/>
    
      <category term="webhooks" scheme="https://ppxu.me/tags/webhooks/"/>
    
      <category term="hexo" scheme="https://ppxu.me/tags/hexo/"/>
    
      <category term="deploy" scheme="https://ppxu.me/tags/deploy/"/>
    
      <category term="shell" scheme="https://ppxu.me/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>é˜¿é‡Œäº‘ECSé…ç½®Nginxå’ŒSSL</title>
    <link href="https://ppxu.me/2015/12/20/config-ssl-in-nginx/"/>
    <id>https://ppxu.me/2015/12/20/config-ssl-in-nginx/</id>
    <published>2015-12-20T14:01:05.000Z</published>
    <updated>2015-12-26T13:58:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ç»™æœåŠ¡å™¨å®‰è£…äº†Nginxï¼Œå¹¶é…ç½®äº†SSLï¼Œç½‘å€å·¦è¾¹ç»ˆäºæœ‰äº†èŒèŒå“’çš„å°ç»¿é”ï¼Œè¿™é‡Œè¿˜æ˜¯åšä¸€ä¸‹è®°å½•ã€‚</p>
<a id="more"></a>
<p>å…ˆæ˜¯å®‰è£…Nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ wget http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</div><div class="line">$ rpm -ivh nginx-release-centos-7-0.el7.ngx.noarch.rpm</div><div class="line">$ yum install nginx</div></pre></td></tr></table></figure>
<p>å¯åŠ¨Nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ systemctl start nginx</div></pre></td></tr></table></figure>
<p>è¿™æ ·NginxæœåŠ¡å°±å·²ç»å¯åŠ¨å®Œæˆäº†ï¼Œè¾“å…¥æœåŠ¡å™¨ipåœ°å€å°±å¯ä»¥çœ‹åˆ°Nginxä¸»é¡µï¼Œç„¶åæˆ‘ä»¬éœ€è¦æŠŠHexoæœåŠ¡çš„4000ç«¯å£è½¬å‘åˆ°Nginxçš„80ç«¯å£ï¼ŒæŸ¥çœ‹Nginxé…ç½®æ–‡ä»¶<code>/etc/nginx/nginx.conf</code>ï¼Œçœ‹åˆ°éœ€è¦ä¿®æ”¹<code>conf.d</code>ç›®å½•ä¸‹çš„<code>/etc/nginx/conf.d/default.conf</code>æ–‡ä»¶</p>
<figure class="highlight tp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       <span class="number">80</span>;</div><div class="line">    server_name  ppxu.me *.ppxu.me;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        proxy_pass          http:<span class="comment">//127.0.0.1:4000/;</span></div><div class="line">        proxy_redirect      off;</div><div class="line">        proxy_set_header    <span class="keyword">X</span>-Real-IP       <span class="variable">$remote_addr</span>;</div><div class="line">        proxy_set_header    <span class="keyword">X</span>-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>é‡å¯Nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ systemctl restart nginx</div></pre></td></tr></table></figure>
<p>ç°åœ¨è®¿é—®ç½‘ç«™ï¼Œåœ¨å“åº”å¤´é‡Œå°±å¯ä»¥çœ‹åˆ°<code>Server:nginx/1.8.0</code>ï¼Œè¯´æ˜Nginxç¯å¢ƒå·²ç»æ­£å¸¸äº†ï¼Œä¸‹é¢å‡†å¤‡æä¸ŠHTTPSã€‚</p>
<p>è¿™é‡Œå°±ä¸è¯¦è¿°HTTPSçš„åŸç†äº†ï¼Œå¯¹æˆ‘ä»¬è¿™ä¸ªå°åšå®¢è€Œè¨€ï¼Œæä¸ªå…è´¹çš„SSLè¯ä¹¦å°±å¯ä»¥äº†ï¼Œè¿™é‡Œæ¨è<a href="https://startssl.com/" target="_blank" rel="external">https://startssl.com/</a>æˆ–è€…<a href="https://www.wosign.com/" target="_blank" rel="external">https://www.wosign.com/</a>ï¼Œç”³è¯·æˆåŠŸåæŠŠä¸‹è½½ä¸‹æ¥çš„å¯¹åº”ç‰ˆæœ¬çš„è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼ŒåŒ…å«å…¬é’¥<code>xx.crt</code>å’Œç§é’¥<code>xx.key</code>ã€‚</p>
<p>ç„¶åç¼–è¾‘<code>/etc/nginx/conf.d/default.conf</code></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       80;</div><div class="line">    listen       443 ssl;</div><div class="line">    server_name  ppxu.me *.ppxu.me;</div><div class="line"></div><div class="line">    ssl <span class="keyword">on</span>;</div><div class="line">    ssl_certificate /etc/nginx/<span class="keyword">conf</span>.<span class="keyword">d</span>/ppxu.crt;</div><div class="line">    ssl_certificate_key /etc/nginx/<span class="keyword">conf</span>.<span class="keyword">d</span>/ppxu.key;</div><div class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</div><div class="line">    ssl_ciphers 'AES128+EECDH:AES128+EDH:!aNULL';</div><div class="line">    ssl_prefer_server_ciphers <span class="keyword">on</span>;</div><div class="line">    ssl_session_cache shared:SSL:10m;</div><div class="line">    ssl_session_timeout 10m;</div><div class="line">    ssl_stapling <span class="keyword">on</span>;</div><div class="line">    ssl_stapling_verify <span class="keyword">on</span>;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        proxy_pass          http:<span class="comment">//127.0.0.1:4000/;</span></div><div class="line">        proxy_redirect      off;</div><div class="line">        proxy_set_header    X-Real-IP       <span class="variable">$remote_addr</span>;</div><div class="line">        proxy_set_header    X-Forwarded-<span class="keyword">For</span> <span class="variable">$proxy_add_x_forwarded_for</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ...</div></pre></td></tr></table></figure>
<p>é‡å¯Nginxï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç°åœ¨å°±å¯ä»¥é€šè¿‡<code>https://ppxu.me</code>è®¿é—®åˆ°æœ¬ç½‘ç«™äº†ï¼Œä½†æ˜¯å¦‚æœç›´æ¥è¾“å…¥<code>ppxu.me</code>çš„è¯ä¼šæŠ¥400é”™è¯¯ï¼Œæ˜¾ç¤º</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">The plain HTTP request was sent to HTTPS port</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†httpçš„è¯·æ±‚å¼ºåˆ¶ä½¿ç”¨httpsè®¿é—®ï¼Œæœ€æ–¹ä¾¿çš„åŠæ³•æ˜¯å¯ç”¨HSTSï¼Œåœ¨nginxçš„é…ç½®ä¸­æ·»åŠ </p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">add_header </span><span class="keyword">Strict-Transport-Security </span><span class="string">"max-age=31536000; includeSubdomains"</span><span class="comment">;</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·åªè¦æ˜¯æ”¯æŒHSTSçš„æµè§ˆå™¨ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®Œæˆhttpåˆ°httpsçš„æ›¿æ¢ï¼Œè€Œä¸”æ˜¯ç›´æ¥åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆçš„ï¼Œå¯¹äºä¸æ”¯æŒçš„æµè§ˆå™¨ï¼Œåªèƒ½åœ¨æœåŠ¡å™¨åšé‡å®šå‘äº†ï¼Œç»§ç»­åœ¨Nginxé…ç½®ä¸­æ·»åŠ ä¸€æ¡è§„åˆ™</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">error_page</span> <span class="number">497</span>  https://<span class="variable">$host</span><span class="variable">$uri</span>;</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬çš„ç½‘ç«™å°±å·²ç»å®Œå…¨æ”¯æŒäº†HTTPSè®¿é—®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™<a href="https://www.ssllabs.com/ssltest/analyze.html" target="_blank" rel="external">https://www.ssllabs.com/ssltest/analyze.html</a>å¯¹ç½‘é¡µè¿›è¡Œå®‰å…¨è¯„æµ‹ï¼Œå¦‚æœè¯„åˆ†ä¸å¤Ÿé«˜çš„è¯å¯ä»¥å†çœ‹çœ‹å¦‚ä½•<a href="http://www.oschina.net/translate/strong_ssl_security_on_nginx" target="_blank" rel="external">åŠ å¼ºnginxçš„SSLå®‰å…¨</a>ã€‚</p>
<p><img src="http://7xpbfd.com1.z0.glb.clouddn.com/ssl.png" alt="http://7xpbfd.com1.z0.glb.clouddn.com/ssl.png"></p>
<h4 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™">Â¶</a>å‚è€ƒèµ„æ–™</h4>
<ul>
<li><a href="http://codybonney.com/installing-nginx-on-centos-6-4/" target="_blank" rel="external">http://codybonney.com/installing-nginx-on-centos-6-4/</a></li>
<li><a href="http://www.tuijiankan.com/2015/05/04/%E9%98%BF%E9%87%8C%E4%BA%91Centos6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AENodejs%E3%80%81Nginx%E3%80%81Hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/" target="_blank" rel="external">http://www.tuijiankan.com/2015/05/04/é˜¿é‡Œäº‘Centos6å®‰è£…é…ç½®Nodejsã€Nginxã€Hexoæ“ä½œè®°å½•/</a></li>
<li><a href="http://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/" target="_blank" rel="external">http://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/</a></li>
<li><a href="https://imququ.com/post/switch-to-https.html" target="_blank" rel="external">https://imququ.com/post/switch-to-https.html</a></li>
<li><a href="https://imququ.com/post/sth-about-switch-to-https.html" target="_blank" rel="external">https://imququ.com/post/sth-about-switch-to-https.html</a></li>
<li><a href="http://www.ha97.com/5194.html" target="_blank" rel="external">http://www.ha97.com/5194.html</a></li>
<li><a href="http://www.cnblogs.com/yanghuahui/archive/2012/06/25/2561568.html" target="_blank" rel="external">http://www.cnblogs.com/yanghuahui/archive/2012/06/25/2561568.html</a></li>
<li><a href="http://www.codeceo.com/article/nginx-ssl-nodejs.html" target="_blank" rel="external">http://www.codeceo.com/article/nginx-ssl-nodejs.html</a></li>
<li><a href="http://www.ttlsa.com/nginx/nginx-node-js/" target="_blank" rel="external">http://www.ttlsa.com/nginx/nginx-node-js/</a></li>
<li><a href="http://blog.csdn.net/wzy_1988/article/details/8549290" target="_blank" rel="external">http://blog.csdn.net/wzy_1988/article/details/8549290</a></li>
<li><a href="http://www.tutugreen.com/wordpress/upgrade-ssl/" target="_blank" rel="external">http://www.tutugreen.com/wordpress/upgrade-ssl/</a></li>
<li><a href="http://www.oschina.net/translate/strong_ssl_security_on_nginx" target="_blank" rel="external">http://www.oschina.net/translate/strong_ssl_security_on_nginx</a></li>
<li><a href="http://blog.jobbole.com/44844/" target="_blank" rel="external">http://blog.jobbole.com/44844/</a></li>
<li><a href="http://blog.jobbole.com/80591/" target="_blank" rel="external">http://blog.jobbole.com/80591/</a></li>
<li><a href="https://imququ.com/post/my-nginx-conf-for-wpo.html" target="_blank" rel="external">https://imququ.com/post/my-nginx-conf-for-wpo.html</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©ç»™æœåŠ¡å™¨å®‰è£…äº†Nginxï¼Œå¹¶é…ç½®äº†SSLï¼Œç½‘å€å·¦è¾¹ç»ˆäºæœ‰äº†èŒèŒå“’çš„å°ç»¿é”ï¼Œè¿™é‡Œè¿˜æ˜¯åšä¸€ä¸‹è®°å½•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="aliyun" scheme="https://ppxu.me/tags/aliyun/"/>
    
      <category term="ecs" scheme="https://ppxu.me/tags/ecs/"/>
    
      <category term="centos" scheme="https://ppxu.me/tags/centos/"/>
    
      <category term="nginx" scheme="https://ppxu.me/tags/nginx/"/>
    
      <category term="ssl" scheme="https://ppxu.me/tags/ssl/"/>
    
      <category term="https" scheme="https://ppxu.me/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>é˜¿é‡Œäº‘ECSæ­å»ºHexoåšå®¢</title>
    <link href="https://ppxu.me/2015/12/19/install-nodejs-and-hexo-in-aliyun-centos/"/>
    <id>https://ppxu.me/2015/12/19/install-nodejs-and-hexo-in-aliyun-centos/</id>
    <published>2015-12-19T02:31:27.000Z</published>
    <updated>2015-12-26T13:54:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åˆšæ’¸äº†ä¸ªé˜¿é‡Œäº‘ECSæœåŠ¡å™¨æ¥æŠ˜è…¾ï¼Œå…ˆæ­ä¸ªHexoåšå®¢è€è€ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æ“ä½œæ­¥éª¤ã€‚</p>
<a id="more"></a>
<p>æ’¸ä¸»é€‰çš„æ˜¯æœ€ä¾¿å®œçš„é˜¿é‡Œäº‘ECSï¼Œåº”ä»˜æ—¥å¸¸å°æ’¸å¦¥å¦¥çš„ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">CPUï¼š<span class="number">1</span>æ ¸</div><div class="line">å†…å­˜ï¼š<span class="number">1024</span>MB</div><div class="line">æ“ä½œç³»ç»Ÿï¼šCentOS <span class="number">7.2</span> <span class="number">64</span>ä½</div><div class="line">å¸¦å®½ï¼š<span class="number">1</span>Mbps</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯å…·ä½“çš„æ­¥éª¤ï¼š</p>
<ul>
<li>è¿æ¥æœåŠ¡å™¨</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh root@xx.xx.xx.xx</div></pre></td></tr></table></figure>
<ul>
<li>
<p>å®‰è£…Nodejsç¯å¢ƒ</p>
<ul>
<li>æ›´æ–°è½¯ä»¶æº</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ yum -y update</div></pre></td></tr></table></figure>
<ul>
<li>ä¸‹è½½Node.js</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</div><div class="line">$ wget http://nodejs.org/dist/node-latest.tar.gz</div></pre></td></tr></table></figure>
<ul>
<li>è§£å‹</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ tar zxf node-latest.tar.gz</div><div class="line">$ <span class="built_in">cd</span> node-v*.*.*</div></pre></td></tr></table></figure>
<ul>
<li>ç¼–è¯‘å®‰è£…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./configure</div><div class="line">$ make &amp;&amp; make install</div></pre></td></tr></table></figure>
<ul>
<li>ç¡®è®¤å®‰è£…æˆåŠŸ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ node -v</div><div class="line">$ npm -v</div></pre></td></tr></table></figure>
</li>
<li>
<p>å®‰è£…Hexo</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo-cli</div><div class="line">$ hexo init blog</div><div class="line">$ <span class="built_in">cd</span> blog</div><div class="line">$ npm install</div></pre></td></tr></table></figure>
<ul>
<li>å¯åŠ¨Hexo</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ hexo server    //æ™®é€šå¯åŠ¨</div><div class="line">$ hexo server &amp;  //é™é»˜å¯åŠ¨</div></pre></td></tr></table></figure>
<p>å¯åŠ¨æˆåŠŸåå°±å¯ä»¥é€šè¿‡æœåŠ¡å™¨çš„ipåœ°å€<code>xx.xx.xx.xx:4000</code>è®¿é—®åˆ°é¡µé¢äº†ï¼Œç„¶åæŠŠ4000è½¬åˆ°80ä¸Šï¼Œé€šå¸¸åšæ³•æ˜¯ç”¨Nginxåšåå‘ä»£ç†ï¼Œè¿™é‡Œå…ˆç”¨iptablesé˜²ç«å¢™ç®€å•åšä¸€ä¸‹è½¬å‘å¤„ç†ã€‚</p>
<ul>
<li>è½¬åˆ°80ç«¯å£</li>
</ul>
<p>ç¼–è¾‘iptablesæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vi /etc/sysconfig/iptables</div></pre></td></tr></table></figure>
<p>åŠ ä¸Šä¸‹é¢è¿™æ®µ</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-A INPUT -m <span class="keyword">state</span> --state NEW -m tcp -p tcp --dport <span class="number">80</span> -j ACCEPT</div><div class="line">-A INPUT -m <span class="keyword">state</span> --state NEW -m tcp -p tcp --dport <span class="number">4000</span> -j ACCEPT</div><div class="line"></div><div class="line">*nat</div><div class="line">-A PREROUTING -p tcp --dport <span class="number">80</span> -j REDIRECT --to-ports <span class="number">4000</span></div><div class="line">COMMIT</div></pre></td></tr></table></figure>
<p>é‡å¯iptablesæœåŠ¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ service iptables restart</div></pre></td></tr></table></figure>
<p>è¿™æ—¶å‘ç°æŠ¥é”™äº†</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Failed <span class="built_in">to</span> restart iptables.service: Unit iptables.service failed <span class="built_in">to</span> <span class="built_in">load</span>: No such <span class="built_in">file</span> <span class="keyword">or</span> <span class="built_in">directory</span>.</div></pre></td></tr></table></figure>
<p>æŸ¥äº†ä¸€ä¸‹åŸæ¥æ˜¯CentOS 7ä¸­çš„é˜²ç«å¢™æ”¹æˆäº†firewalldï¼Œè¿™é‡Œå…ˆæ¢å›iptablesã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ systemctl stop firewalld</div><div class="line">$ systemctl mask firewalld</div><div class="line">$ yum install iptables-services</div><div class="line">$ systemctl <span class="built_in">enable</span> iptables</div><div class="line">$ service start iptables</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥é€šè¿‡ipåœ°å€<code>xx.xx.xx.xx</code>ç›´æ¥è®¿é—®ç½‘ç«™äº†ã€‚</p>
<ul>
<li>åŸŸåè§£æ</li>
</ul>
<p>å†æ’¸ä¸ªåŸŸå<code>ppxu.me</code>ï¼ŒæŠŠ<code>@</code>å’Œ<code>www</code>éƒ½è§£æåˆ°æœåŠ¡å™¨ipåœ°å€å°±å¯ä»¥äº†ã€‚</p>
<ul>
<li>gitç®¡ç†</li>
</ul>
<p>å†é…ç½®ä¸€ä¸‹gitç¯å¢ƒï¼Œä»¥åå°±å¯ä»¥é€šè¿‡gitæ¥ç®¡ç†å†…å®¹äº†ã€‚</p>
<h4 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™">Â¶</a>å‚è€ƒèµ„æ–™</h4>
<ul>
<li><a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="external">https://hexo.io/zh-cn/docs/index.html</a></li>
<li><a href="http://wsgzao.github.io/post/hexo-guide/" target="_blank" rel="external">http://wsgzao.github.io/post/hexo-guide/</a></li>
<li><a href="http://zipperary.com/categories/hexo/" target="_blank" rel="external">http://zipperary.com/categories/hexo/</a></li>
<li><a href="http://www.jianshu.com/p/73779eacb494" target="_blank" rel="external">http://www.jianshu.com/p/73779eacb494</a></li>
<li><a href="http://www.tuijiankan.com/2015/05/04/%E9%98%BF%E9%87%8C%E4%BA%91Centos6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AENodejs%E3%80%81Nginx%E3%80%81Hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/" target="_blank" rel="external">http://www.tuijiankan.com/2015/05/04/é˜¿é‡Œäº‘Centos6å®‰è£…é…ç½®Nodejsã€Nginxã€Hexoæ“ä½œè®°å½•/</a></li>
<li><a href="http://codybonney.com/installing-node-js-0-10-24-on-centos-6-4/" target="_blank" rel="external">http://codybonney.com/installing-node-js-0-10-24-on-centos-6-4/</a></li>
<li><a href="http://codybonney.com/redirect-port-80-to-another-port-using-iptables-on-centos/" target="_blank" rel="external">http://codybonney.com/redirect-port-80-to-another-port-using-iptables-on-centos/</a></li>
<li><a href="http://www.vkilo.com/rhel-7-iptables-service.html" target="_blank" rel="external">http://www.vkilo.com/rhel-7-iptables-service.html</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åˆšæ’¸äº†ä¸ªé˜¿é‡Œäº‘ECSæœåŠ¡å™¨æ¥æŠ˜è…¾ï¼Œå…ˆæ­ä¸ªHexoåšå®¢è€è€ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æ“ä½œæ­¥éª¤ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="blog" scheme="https://ppxu.me/categories/blog/"/>
    
    
      <category term="hexo" scheme="https://ppxu.me/tags/hexo/"/>
    
      <category term="aliyun" scheme="https://ppxu.me/tags/aliyun/"/>
    
      <category term="ecs" scheme="https://ppxu.me/tags/ecs/"/>
    
      <category term="centos" scheme="https://ppxu.me/tags/centos/"/>
    
      <category term="nodejs" scheme="https://ppxu.me/tags/nodejs/"/>
    
      <category term="blog" scheme="https://ppxu.me/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://ppxu.me/2015/12/18/hello-world/"/>
    <id>https://ppxu.me/2015/12/18/hello-world/</id>
    <published>2015-12-18T14:31:17.000Z</published>
    <updated>2015-12-18T14:31:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="quick-start"><a class="header-anchor" href="#quick-start">Â¶</a>Quick Start</h2>
<h3 id="create-a-new-post"><a class="header-anchor" href="#create-a-new-post">Â¶</a>Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="run-server"><a class="header-anchor" href="#run-server">Â¶</a>Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="generate-static-files"><a class="header-anchor" href="#generate-static-files">Â¶</a>Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="deploy-to-remote-sites"><a class="header-anchor" href="#deploy-to-remote-sites">Â¶</a>Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;http://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;http://hexo.io
    
    </summary>
    
    
  </entry>
  
</feed>
