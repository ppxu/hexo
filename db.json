{"meta":{"version":1,"warehouse":"1.0.3"},"models":{"Asset":[{"_id":"themes/apollo/source/scss/apollo.scss","path":"scss/apollo.scss","modified":0},{"_id":"themes/apollo/source/favicon.png","path":"favicon.png","modified":1},{"_id":"themes/apollo/source/css/apollo.css","path":"css/apollo.css","modified":0},{"_id":"themes/apollo/source/favicon.png.old","path":"favicon.png.old","modified":1},{"_id":"themes/apollo/source/ppxu.jpg","path":"ppxu.jpg","modified":1}],"Cache":[{"_id":"source/_posts/config-spdy-in-nginx.md","shasum":"e56772f3e08306da2b47dc66f9cdc820b3899c49","modified":1450878385000},{"_id":"source/_posts/enable-emoji-in-hexo.md","shasum":"09ef89c25e8db72d2424a48b19c1920a751bd8c8","modified":1451011515000},{"_id":"source/_posts/config-ssl-in-nginx.md","shasum":"621fa313cdfd1890f637db7afd6d968c051c9ef8","modified":1450878403000},{"_id":"source/_posts/hello-world.md","shasum":"774b507901d9b17991ace2a70263b6dd6d11999a","modified":1450449077000},{"_id":"source/_posts/auto-deploy-hexo-with-github-webhooks.md","shasum":"3d46f7c4e4cdf294bf4bd4e318db1df77ef9314c","modified":1450878113000},{"_id":"source/_posts/install-nodejs-and-hexo-in-aliyun-centos.md","shasum":"e3f1c964720e5dd6bcf1a57a018dfc150a73c662","modified":1450878471000},{"_id":"source/_posts/nginx-smooth-upgrade-and-config-http2.md","shasum":"1e5d339a788162856de780fdbd004ee312c42dc2","modified":1450963602000},{"_id":"themes/apollo/LICENSE","shasum":"6e31ac9076bfc8f09ae47977419eee4edfb63e5b","modified":1450495410000},{"_id":"themes/apollo/README.md","shasum":"fdaa691c63bba80c75b17e9426c06f148dfb9dc4","modified":1450495410000},{"_id":"themes/apollo/_config.yml","shasum":"2ef4a9286304b5a83e3a93ede98a6539c380bd8c","modified":1451026348000},{"_id":"themes/apollo/doc/custom-blocks.md","shasum":"78e9400714d0ff7c9b272d3ccc80fb18c3bf208f","modified":1450495410000},{"_id":"themes/apollo/gulpfile.babel.js","shasum":"ae6ba496e2672ed07050295954ca3da8b0ef423c","modified":1450495410000},{"_id":"themes/apollo/layout/index.jade","shasum":"58c451042cad5beeb5a76852bba609c651ff3428","modified":1450495410000},{"_id":"themes/apollo/layout/mixins/paginator.jade","shasum":"510ee0ba37b4522cca6c6204d641809454ba3ac6","modified":1450495410000},{"_id":"themes/apollo/layout/mixins/post.jade","shasum":"db05e11065f6f37324218accadd4c7630c80c663","modified":1450772110000},{"_id":"themes/apollo/layout/partial/comment.jade","shasum":"ff0a2c269c2434da2ac5529872f1d6184a71f96d","modified":1450495410000},{"_id":"themes/apollo/layout/partial/foot.jade","shasum":"75cdc0710d841d5d94979cc9f9573d307647621c","modified":1450772166000},{"_id":"themes/apollo/layout/partial/head.jade","shasum":"2e490108c1f000b39606cf610fcf77c30b19d590","modified":1450772460000},{"_id":"themes/apollo/layout/partial/layout.jade","shasum":"7aae8a09d88ce269f1cfb3394d3afcf4b1962b51","modified":1450717689000},{"_id":"themes/apollo/layout/partial/nav.jade","shasum":"c35d3061da4b053b73150d9741c542d660798270","modified":1450495410000},{"_id":"themes/apollo/layout/partial/scripts.jade","shasum":"ed937de186642bb8d11defc2b1c5cbf3388aa59e","modified":1450497749000},{"_id":"themes/apollo/layout/post.jade","shasum":"6de2c8cb24d70035008155ff5ba37d6bdeb94e8d","modified":1450772053000},{"_id":"themes/apollo/package.json","shasum":"a872d0158d522612ccc0b300bdf27d0228de8428","modified":1450495410000},{"_id":"themes/apollo/source/css/apollo.css","shasum":"1deaf6c233e1e3edc623de49d7b8463ced148538","modified":1450945899000},{"_id":"themes/apollo/source/favicon.png","shasum":"f066c242e1e35e7c3b4b5bf362a1c47ac647552f","modified":1451026189000},{"_id":"themes/apollo/source/scss/_partial/base.scss","shasum":"88b361e68475caddbab763feed5e1db788ac2cd7","modified":1450495410000},{"_id":"themes/apollo/source/scss/_partial/footer.scss","shasum":"cf0ad16d999537cefe8441893b4edcb54eafe37c","modified":1450772597000},{"_id":"themes/apollo/source/scss/_partial/header.scss","shasum":"d24cc6520f3faa7bb80610b858a92639eadcc289","modified":1450495410000},{"_id":"themes/apollo/source/scss/_partial/mq.scss","shasum":"0b9c7097136ac8e4a07d9702fc4dbe0345ac7596","modified":1450495410000},{"_id":"themes/apollo/source/scss/_partial/normalize.scss","shasum":"fd0b27bed6f103ea95b08f698ea663ff576dbcf1","modified":1450495410000},{"_id":"themes/apollo/source/scss/_partial/post.scss","shasum":"90945db06b2972334ade6e8052eb8c9110814e85","modified":1450945932000},{"_id":"themes/apollo/source/scss/_partial/posts.scss","shasum":"92858015b8f3dcb4eb91b6dc41563b7aaa91b376","modified":1450495410000},{"_id":"themes/apollo/source/scss/apollo.scss","shasum":"f8b40223ea647b7c5627c344ead5c1a493bdd576","modified":1450495410000},{"_id":"public/2015/12/24/enable-emoji-in-hexo/index.html","modified":1451026446508,"shasum":"27285fabb228fdc4c1916fa4d32b865d33a90870"},{"_id":"public/2015/12/23/nginx-smooth-upgrade-and-config-http2/index.html","modified":1451026446613,"shasum":"6821a52dfd3e3abb552023d558dc1b30b4dd76be"},{"_id":"public/2015/12/22/config-spdy-in-nginx/index.html","modified":1451026446669,"shasum":"92352ffc977ebe9147771b74e81668f940d7d782"},{"_id":"public/2015/12/21/auto-deploy-hexo-with-github-webhooks/index.html","modified":1451026446721,"shasum":"46bb351f9b2a605c71c1f14737863e8254a20282"},{"_id":"public/2015/12/20/config-ssl-in-nginx/index.html","modified":1451026446774,"shasum":"6303106d2bdc5bd612d4e1bbb3d1e30ae9fb13fc"},{"_id":"public/2015/12/19/install-nodejs-and-hexo-in-aliyun-centos/index.html","modified":1451026446833,"shasum":"33fac62f96265d99def40d7f79690a36e62be963"},{"_id":"public/2015/12/18/hello-world/index.html","modified":1451026446890,"shasum":"9304f845200bc8faacfa7942625962b3a95f344b"},{"_id":"public/archives/index.html","modified":1451026446938,"shasum":"03ad2226b1489ca522b24786664be8861c2e7161"},{"_id":"public/archives/2015/index.html","modified":1451026446989,"shasum":"03ad2226b1489ca522b24786664be8861c2e7161"},{"_id":"public/archives/2015/12/index.html","modified":1451026447036,"shasum":"03ad2226b1489ca522b24786664be8861c2e7161"},{"_id":"public/atom.xml","modified":1451011541259,"shasum":"453418e890725f331b67a136802231220506d41c"},{"_id":"public/categories/blog/index.html","modified":1451026447074,"shasum":"851717e3c0ad053db22b425a9e7fb74d7b0f09dd"},{"_id":"public/index.html","modified":1451026447762,"shasum":"bbd38e88303ac844c1ca3bf1267e7f5b277ae56a"},{"_id":"public/sitemap.xml","modified":1451011541294,"shasum":"b282cabef3480663091d71fbfcaa4da171978fd9"},{"_id":"public/tags/github/index.html","modified":1451026447122,"shasum":"690a75184fbde84c14d419ce6c6efd75b9da243e"},{"_id":"public/tags/webhooks/index.html","modified":1451026447173,"shasum":"690a75184fbde84c14d419ce6c6efd75b9da243e"},{"_id":"public/tags/hexo/index.html","modified":1451026447208,"shasum":"adf649a85d6a9b3a69a6f25abe9f281525168af7"},{"_id":"public/tags/deploy/index.html","modified":1451026447256,"shasum":"690a75184fbde84c14d419ce6c6efd75b9da243e"},{"_id":"public/tags/shell/index.html","modified":1451026447302,"shasum":"690a75184fbde84c14d419ce6c6efd75b9da243e"},{"_id":"public/tags/aliyun/index.html","modified":1451026447340,"shasum":"c388deaec050ad11189ddddd889a4f908b29b4eb"},{"_id":"public/tags/ecs/index.html","modified":1451026447385,"shasum":"c388deaec050ad11189ddddd889a4f908b29b4eb"},{"_id":"public/tags/centos/index.html","modified":1451026447418,"shasum":"c388deaec050ad11189ddddd889a4f908b29b4eb"},{"_id":"public/tags/nginx/index.html","modified":1451026447466,"shasum":"a4d4a882c3184a31a1d6c5e25111e7cccf2a9191"},{"_id":"public/tags/http2/index.html","modified":1451026447501,"shasum":"3c054f965f5efeb0866f98fe7d23ef523795f1bc"},{"_id":"public/tags/nodejs/index.html","modified":1451026447547,"shasum":"9df1606b6a7c64ad7d6378c65046d02021bfccbd"},{"_id":"public/tags/markdown/index.html","modified":1451026447590,"shasum":"e8fef41af864da694d9911b7f32ebca6e9d3c765"},{"_id":"public/tags/emoji/index.html","modified":1451026447625,"shasum":"e8fef41af864da694d9911b7f32ebca6e9d3c765"},{"_id":"public/tags/ssl/index.html","modified":1451026447656,"shasum":"abaee567fb3090f45873105f2f3825d7c52a50b8"},{"_id":"public/tags/https/index.html","modified":1451026447697,"shasum":"abaee567fb3090f45873105f2f3825d7c52a50b8"},{"_id":"public/tags/spdy/index.html","modified":1451026447721,"shasum":"33db901ab414420dde3d2dd066b6852058dd0af0"},{"_id":"themes/apollo/source/favicon.png.old","shasum":"a9cdcb22d1e74d5480323e19d1983de5a6873b8c","modified":1450495410000},{"_id":"themes/apollo/source/ppxu.jpg","shasum":"216af1c8674d02ec4821fe789d6153ae5fc214b6","modified":1376048026000},{"_id":"public/favicon.png","modified":1451026446302,"shasum":"f066c242e1e35e7c3b4b5bf362a1c47ac647552f"},{"_id":"public/favicon.png.old","modified":1451026446305,"shasum":"a9cdcb22d1e74d5480323e19d1983de5a6873b8c"},{"_id":"public/ppxu.jpg","modified":1451026446308,"shasum":"216af1c8674d02ec4821fe789d6153ae5fc214b6"}],"Category":[{"name":"blog","_id":"ciikb4jbj0001nixxwdjzbsgn"}],"Data":[],"Page":[],"Post":[{"title":"ä½¿ç”¨Githubçš„Webhookså®ç°Hexoçš„è‡ªåŠ¨éƒ¨ç½²","date":"2015-12-21T09:29:24.000Z","_content":"åšå®¢ä¹‹å‰çš„æ›´æ–°æ–¹å¼æ˜¯å…ˆåœ¨æœ¬åœ°å†™å¥½æ–‡ç« ï¼Œpushåˆ°Githubï¼Œç„¶åsshè¿åˆ°æœåŠ¡å™¨ä¸Šï¼Œå†pullä¸‹æ¥ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¦è¿™æ ·æ“ä½œä¸€éå®åœ¨éº»çƒ¦ï¼Œä»Šå¤©å°±è¯•ç€ç”¨Githubçš„WebhooksåŠŸèƒ½å®ç°äº†Hexoåšå®¢çš„è‡ªåŠ¨éƒ¨ç½²ï¼Œè¿‡ç¨‹è®°å½•å¦‚ä¸‹ã€‚\n\n<!--more-->\n\næ•´ä¸ªè¿‡ç¨‹æœ‰ä¸¤ä¸ªç¯èŠ‚ï¼š\n\n### æœ¬åœ°ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°Github\n\nHexoæœ¬èº«å°±æœ‰deployåŠŸèƒ½ï¼Œåªè¦åœ¨`_config.yml`é‡Œé¢åšä¸€ä¸‹[é…ç½®](https://hexo.io/zh-cn/docs/deployment.html)ï¼Œå°±å¯ä»¥éƒ¨ç½²åˆ°Githubã€Herokuç­‰å¹³å°ä¸Šï¼Œå¦‚æœåšå®¢æ˜¯æ‰˜ç®¡åœ¨Github Pagesä¸Šçš„è¯ä½¿ç”¨è¿™ç§æ–¹å¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°è‡ªåŠ¨éƒ¨ç½²ï¼Œä¸è¿‡é€šè¿‡è¿™ç§æ–¹å¼å‘é€åˆ°Githubä¸Šçš„åªæœ‰`public`ç›®å½•ï¼Œæˆ‘è¿™é‡Œå¸Œæœ›æ‰˜ç®¡æ•´ä¸ªåº”ç”¨çš„ä»£ç ï¼Œå°±ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼äº†ï¼Œåæ­£åªè¦å¯ä»¥pushå°±è¡Œäº†ï¼Œæˆ‘ä»¬æ¬å‡ºshellå¤§æ³•å¥½ã€‚\n\nåˆ›å»ºæ–‡ä»¶`deploy.sh`\n\n{% codeblock %}\n#!/bin/bash\n\necho -e \"\\033[32m [AUTO DEPLOY] deploy hexo start \\033[0m\"\necho -e \"\\033[32m [AUTO DEPLOY] hexo generate...  \\033[0m\"\nhexo g\necho -e \"\\033[32m [AUTO DEPLOY] git commit...  \\033[0m\"\nd=`date +%x-%T`\ngit add .\ngit commit -m \"auto deploy at \"${d}\necho -e \"\\033[32m [AUTO DEPLOY] git push...  \\033[0m\"\ngit push origin master\necho -e \"\\033[32m [AUTO DEPLOY] deploy hexo finish \\033[0m\"\n{% endcodeblock %}\n\nç„¶åå¢åŠ æƒé™\n\n{% codeblock %}\n# chmod +x ./deploy.sh\n{% endcodeblock %}\n\nè¿™æ ·å®Œæˆæœ¬åœ°å¼€å‘åï¼Œåªè¦æ‰§è¡Œå‘½ä»¤\n\n{% codeblock %}\n# ./deploy.sh\n{% endcodeblock %}\n\nå°±å¯ä»¥è®©Hexoç”Ÿæˆé™æ€æ–‡ä»¶å¹¶pushåˆ°Githubä¸Šã€‚\n\n### Githubè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨\n\nä¸ºäº†è®©æœåŠ¡å™¨å¯ä»¥è‡ªåŠ¨åŒæ­¥Githubä¸Šé¢çš„æ›´æ–°ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°Githubçš„Webhooksã€‚\n\né¦–å…ˆåˆ›å»ºæ–‡ä»¶`sync.sh`\n\n{% codeblock %}\n#!/bin/bash\n\necho -e \"\\033[32m [AUTO SYNC] sync hexo start \\033[0m\"\ncd /ppxu/blog\necho -e \"\\033[32m [AUTO SYNC] git pull...  \\033[0m\"\ngit pull origin master\necho -e \"\\033[32m [AUTO SYNC] sync hexo finish \\033[0m\"\n{% endcodeblock %}\n\nç›®æ ‡æ˜¯æ¯å½“Githubæœ‰pushçš„æ—¶å€™å°±è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªè„šæœ¬ã€‚\n\nç„¶åæ‰¾åˆ°Githubä»“åº“çš„Settingsé¡µ\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/hook.png](http://7xpbfd.com1.z0.glb.clouddn.com/hook.png)\n\næ·»åŠ ä¸€æ¡Webhookï¼Œå¡«å†™è¯·æ±‚åœ°å€`http://xx.xx.xx.xx:7777/webhook`ï¼Œè¿™æ ·æ¯å½“Githubæ”¶åˆ°pushæˆ–è€…å…¶ä»–äº‹ä»¶æ—¶å°±ä¼šè‡ªåŠ¨å‘è¿™ä¸ªåœ°å€å‘é€ä¸€æ¡POSTè¯·æ±‚ã€‚\n\nä¸‹é¢åœ¨æœåŠ¡å™¨ä¸Šè¡¥å……è¿™ä¸ªè¯·æ±‚åœ°å€ï¼Œæˆ‘ä»¬ç”¨Nodeæ­ä¸€ä¸ªç®€å•çš„httpæœåŠ¡ï¼Œè¿™é‡Œç”¨åˆ°äº†[github-webhook-handler](https://github.com/rvagg/github-webhook-handler)å¤„ç†hookæ¶ˆæ¯ï¼Œåˆ›å»ºæ–‡ä»¶`server.js`\n\n{% codeblock %}\nvar http = require('http')\nvar exec = require('child_process').exec;\nvar createHandler = require('github-webhook-handler')\nvar handler = createHandler({ path: '/webhook', secret: '********' });\n\nhttp.createServer(function (req, res) {\n  handler(req, res, function (err) {\n    res.statusCode = 404;\n    res.end('no such location');\n  });\n}).listen(7777);\n\nhandler.on('error', function (err) {\n  console.error('Error:', err.message);\n});\n\nhandler.on('push', function (event) {\n  console.log('Received a push event for %s to %s',\n    event.payload.repository.name,\n    event.payload.ref);\n  exec('/ppxu/blog/sync.sh', function(err, stdout, stderr){\n    if(err) {\n      console.log('sync server err: ' + stderr);\n    } else {\n      console.log(stdout);\n    }\n  });\n});\n{% endcodeblock %}\n\nè¿™é‡Œçš„`secret`è¦å’Œåœ¨Githubä¸Šæ–°å»ºhookæ—¶è®¾ç½®çš„ä¸€æ ·ï¼Œè¯·æ±‚æ—¶æ ¡éªŒç”¨çš„ã€‚\n\nç„¶åå¯åŠ¨æœåŠ¡\n\n{% codeblock %}\n# node server.js &\n{% endcodeblock %}\n\nè¿™é‡Œä¹Ÿå¯ä»¥ç”¨foreverä¹‹ç±»çš„å·¥å…·é˜²æ­¢è¿›ç¨‹æŒ‚æ‰ã€‚\n\nè¿™æ ·ä¸€å¥—è‡ªåŠ¨éƒ¨ç½²ç³»ç»Ÿå°±å»ºç«‹å¥½äº†ï¼Œåœ¨æœ¬æœºå’ŒæœåŠ¡å™¨çš„å®é™…æ•ˆæœå¦‚ä¸‹ï¼š\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/deploy.png](http://7xpbfd.com1.z0.glb.clouddn.com/deploy.png)\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/sync.png](http://7xpbfd.com1.z0.glb.clouddn.com/sync.png)\n\næ„Ÿè§‰ç”Ÿæ´»ä¸€ä¸‹å­ç¾å¥½èµ·æ¥äº†å‘¢ï¼šï¼‰\n\n#### å‚è€ƒèµ„æ–™\n\n* [https://hexo.io/zh-cn/docs/deployment.html](https://hexo.io/zh-cn/docs/deployment.html)\n\n* [https://developer.github.com/webhooks/](https://developer.github.com/webhooks/)\n\n* [http://www.lovelucy.info/auto-deploy-website-by-webhooks-of-github-and-gitlab.html](http://www.lovelucy.info/auto-deploy-website-by-webhooks-of-github-and-gitlab.html)\n","source":"_posts/auto-deploy-hexo-with-github-webhooks.md","raw":"title: ä½¿ç”¨Githubçš„Webhookså®ç°Hexoçš„è‡ªåŠ¨éƒ¨ç½²\ndate: 2015-12-21 17:29:24\ncategories: blog\ntags: [github, webhooks, hexo, deploy, shell]\n---\nåšå®¢ä¹‹å‰çš„æ›´æ–°æ–¹å¼æ˜¯å…ˆåœ¨æœ¬åœ°å†™å¥½æ–‡ç« ï¼Œpushåˆ°Githubï¼Œç„¶åsshè¿åˆ°æœåŠ¡å™¨ä¸Šï¼Œå†pullä¸‹æ¥ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¦è¿™æ ·æ“ä½œä¸€éå®åœ¨éº»çƒ¦ï¼Œä»Šå¤©å°±è¯•ç€ç”¨Githubçš„WebhooksåŠŸèƒ½å®ç°äº†Hexoåšå®¢çš„è‡ªåŠ¨éƒ¨ç½²ï¼Œè¿‡ç¨‹è®°å½•å¦‚ä¸‹ã€‚\n\n<!--more-->\n\næ•´ä¸ªè¿‡ç¨‹æœ‰ä¸¤ä¸ªç¯èŠ‚ï¼š\n\n### æœ¬åœ°ä»£ç è‡ªåŠ¨éƒ¨ç½²åˆ°Github\n\nHexoæœ¬èº«å°±æœ‰deployåŠŸèƒ½ï¼Œåªè¦åœ¨`_config.yml`é‡Œé¢åšä¸€ä¸‹[é…ç½®](https://hexo.io/zh-cn/docs/deployment.html)ï¼Œå°±å¯ä»¥éƒ¨ç½²åˆ°Githubã€Herokuç­‰å¹³å°ä¸Šï¼Œå¦‚æœåšå®¢æ˜¯æ‰˜ç®¡åœ¨Github Pagesä¸Šçš„è¯ä½¿ç”¨è¿™ç§æ–¹å¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°è‡ªåŠ¨éƒ¨ç½²ï¼Œä¸è¿‡é€šè¿‡è¿™ç§æ–¹å¼å‘é€åˆ°Githubä¸Šçš„åªæœ‰`public`ç›®å½•ï¼Œæˆ‘è¿™é‡Œå¸Œæœ›æ‰˜ç®¡æ•´ä¸ªåº”ç”¨çš„ä»£ç ï¼Œå°±ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼äº†ï¼Œåæ­£åªè¦å¯ä»¥pushå°±è¡Œäº†ï¼Œæˆ‘ä»¬æ¬å‡ºshellå¤§æ³•å¥½ã€‚\n\nåˆ›å»ºæ–‡ä»¶`deploy.sh`\n\n{% codeblock %}\n#!/bin/bash\n\necho -e \"\\033[32m [AUTO DEPLOY] deploy hexo start \\033[0m\"\necho -e \"\\033[32m [AUTO DEPLOY] hexo generate...  \\033[0m\"\nhexo g\necho -e \"\\033[32m [AUTO DEPLOY] git commit...  \\033[0m\"\nd=`date +%x-%T`\ngit add .\ngit commit -m \"auto deploy at \"${d}\necho -e \"\\033[32m [AUTO DEPLOY] git push...  \\033[0m\"\ngit push origin master\necho -e \"\\033[32m [AUTO DEPLOY] deploy hexo finish \\033[0m\"\n{% endcodeblock %}\n\nç„¶åå¢åŠ æƒé™\n\n{% codeblock %}\n# chmod +x ./deploy.sh\n{% endcodeblock %}\n\nè¿™æ ·å®Œæˆæœ¬åœ°å¼€å‘åï¼Œåªè¦æ‰§è¡Œå‘½ä»¤\n\n{% codeblock %}\n# ./deploy.sh\n{% endcodeblock %}\n\nå°±å¯ä»¥è®©Hexoç”Ÿæˆé™æ€æ–‡ä»¶å¹¶pushåˆ°Githubä¸Šã€‚\n\n### Githubè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨\n\nä¸ºäº†è®©æœåŠ¡å™¨å¯ä»¥è‡ªåŠ¨åŒæ­¥Githubä¸Šé¢çš„æ›´æ–°ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°Githubçš„Webhooksã€‚\n\né¦–å…ˆåˆ›å»ºæ–‡ä»¶`sync.sh`\n\n{% codeblock %}\n#!/bin/bash\n\necho -e \"\\033[32m [AUTO SYNC] sync hexo start \\033[0m\"\ncd /ppxu/blog\necho -e \"\\033[32m [AUTO SYNC] git pull...  \\033[0m\"\ngit pull origin master\necho -e \"\\033[32m [AUTO SYNC] sync hexo finish \\033[0m\"\n{% endcodeblock %}\n\nç›®æ ‡æ˜¯æ¯å½“Githubæœ‰pushçš„æ—¶å€™å°±è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªè„šæœ¬ã€‚\n\nç„¶åæ‰¾åˆ°Githubä»“åº“çš„Settingsé¡µ\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/hook.png](http://7xpbfd.com1.z0.glb.clouddn.com/hook.png)\n\næ·»åŠ ä¸€æ¡Webhookï¼Œå¡«å†™è¯·æ±‚åœ°å€`http://xx.xx.xx.xx:7777/webhook`ï¼Œè¿™æ ·æ¯å½“Githubæ”¶åˆ°pushæˆ–è€…å…¶ä»–äº‹ä»¶æ—¶å°±ä¼šè‡ªåŠ¨å‘è¿™ä¸ªåœ°å€å‘é€ä¸€æ¡POSTè¯·æ±‚ã€‚\n\nä¸‹é¢åœ¨æœåŠ¡å™¨ä¸Šè¡¥å……è¿™ä¸ªè¯·æ±‚åœ°å€ï¼Œæˆ‘ä»¬ç”¨Nodeæ­ä¸€ä¸ªç®€å•çš„httpæœåŠ¡ï¼Œè¿™é‡Œç”¨åˆ°äº†[github-webhook-handler](https://github.com/rvagg/github-webhook-handler)å¤„ç†hookæ¶ˆæ¯ï¼Œåˆ›å»ºæ–‡ä»¶`server.js`\n\n{% codeblock %}\nvar http = require('http')\nvar exec = require('child_process').exec;\nvar createHandler = require('github-webhook-handler')\nvar handler = createHandler({ path: '/webhook', secret: '********' });\n\nhttp.createServer(function (req, res) {\n  handler(req, res, function (err) {\n    res.statusCode = 404;\n    res.end('no such location');\n  });\n}).listen(7777);\n\nhandler.on('error', function (err) {\n  console.error('Error:', err.message);\n});\n\nhandler.on('push', function (event) {\n  console.log('Received a push event for %s to %s',\n    event.payload.repository.name,\n    event.payload.ref);\n  exec('/ppxu/blog/sync.sh', function(err, stdout, stderr){\n    if(err) {\n      console.log('sync server err: ' + stderr);\n    } else {\n      console.log(stdout);\n    }\n  });\n});\n{% endcodeblock %}\n\nè¿™é‡Œçš„`secret`è¦å’Œåœ¨Githubä¸Šæ–°å»ºhookæ—¶è®¾ç½®çš„ä¸€æ ·ï¼Œè¯·æ±‚æ—¶æ ¡éªŒç”¨çš„ã€‚\n\nç„¶åå¯åŠ¨æœåŠ¡\n\n{% codeblock %}\n# node server.js &\n{% endcodeblock %}\n\nè¿™é‡Œä¹Ÿå¯ä»¥ç”¨foreverä¹‹ç±»çš„å·¥å…·é˜²æ­¢è¿›ç¨‹æŒ‚æ‰ã€‚\n\nè¿™æ ·ä¸€å¥—è‡ªåŠ¨éƒ¨ç½²ç³»ç»Ÿå°±å»ºç«‹å¥½äº†ï¼Œåœ¨æœ¬æœºå’ŒæœåŠ¡å™¨çš„å®é™…æ•ˆæœå¦‚ä¸‹ï¼š\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/deploy.png](http://7xpbfd.com1.z0.glb.clouddn.com/deploy.png)\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/sync.png](http://7xpbfd.com1.z0.glb.clouddn.com/sync.png)\n\næ„Ÿè§‰ç”Ÿæ´»ä¸€ä¸‹å­ç¾å¥½èµ·æ¥äº†å‘¢ï¼šï¼‰\n\n#### å‚è€ƒèµ„æ–™\n\n* [https://hexo.io/zh-cn/docs/deployment.html](https://hexo.io/zh-cn/docs/deployment.html)\n\n* [https://developer.github.com/webhooks/](https://developer.github.com/webhooks/)\n\n* [http://www.lovelucy.info/auto-deploy-website-by-webhooks-of-github-and-gitlab.html](http://www.lovelucy.info/auto-deploy-website-by-webhooks-of-github-and-gitlab.html)\n","slug":"auto-deploy-hexo-with-github-webhooks","published":1,"updated":"2015-12-23T13:41:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciikb4jbc0000nixxe578z0f6"},{"title":"å¹³æ»‘å‡çº§Nginxå¹¶é…ç½®HTTP/2","date":"2015-12-23T04:47:40.000Z","_content":"è¯è¯´SPDYå·²ç»è¢«HTTP/2ä¸Šä½äº†ï¼Œç½‘ç«™ç»§ç»­ç”¨SPDYä¹Ÿä¸åˆé€‚ï¼Œä»Šå¤©å°±è¶ç©ºå‡çº§äº†æœ€æ–°çš„Nginxï¼Œå¹¶å¼€å¯äº†HTTP/2ï¼Œä¸‹é¢æ˜¯æ“ä½œè¿‡ç¨‹\n\n<!--more-->\n\n1. æ£€æŸ¥å½“å‰Nginxç‰ˆæœ¬å’Œé…ç½®å‚æ•°\n\n  {% codeblock %}\n  # nginx -V\n  nginx version: nginx/1.8.0\n  built by gcc 4.8.2 20140120 (Red Hat 4.8.2-16) (GCC)\n  built with OpenSSL 1.0.1e-fips 11 Feb 2013\n  TLS SNI support enabled\n  configure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-openssl=../libressl-2.2.2 --with-http_v2_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --with-http_spdy_module --with-cc-opt='-O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic'\n  {% endcodeblock %}\n\n  è®°ä¸‹è¿™é‡Œçš„configure argumentsï¼Œåé¢ç¼–è¯‘çš„æ—¶å€™è¦ç”¨çš„ã€‚\n\n2. å®‰è£…PCREï¼ŒNginxçš„rewriteæ¨¡å—ä¾èµ–PCRE\n\n  {% codeblock %}\n  # cd /ppxu\n  # yum -y install make zlib zlib-devel gcc-c++ libtool\n  # wget http://nchc.dl.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz\n  # tar zxvf pcre-8.37.tar.gz\n  # cd pcre-8.37/\n  # ./configure\n  # make && make install\n  {% endcodeblock %}\n\n3. ä¸‹è½½OpenSSLï¼Œå¯ä»¥ä»[OpenSSL](https://www.openssl.org/)æˆ–è€…[LibreSSL](http://www.libressl.org/)ä¸‹è½½\n\n  {% codeblock %}\n  # cd /ppxu\n  # wget http://ftp.openbsd.org/pub/OpenBSD/LibreSSL/libressl-2.3.1.tar.gz\n  # tar zxvf libressl-2.3.1.tar.gz\n  {% endcodeblock %}\n\n4. ä¸‹è½½ï¼Œé…ç½®å¹¶ç¼–è¯‘Nginx\n\n  {% codeblock %}\n  # cd /ppxu\n  # wget http://nginx.org/download/nginx-1.9.9.tar.gz\n  # tar zxvf nginx-1.9.9.tar.gz\n  # cd nginx-1.9.9/\n  # ./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-openssl=../libressl-2.3.1 --with-http_v2_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --with-cc-opt='-O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic'\n  # make\n  {% endcodeblock %}\n\n  å…¶ä¸­çš„`--with-http_v2_module`å°±æ˜¯å¼€å¯HTTP/2çš„è®¾ç½®ã€‚\n\n5. æ›¿æ¢Nginx\n\n  {% codeblock %}\n  # which nginx    //æŸ¥æ‰¾nginxè·¯å¾„\n  # mv /usr/sbin/nginx /usr/sbin/nginx.old    //å¤‡ä»½æ—§ç‰ˆnginx\n  # cp objs/nginx /usr/sbin/    //å°†ç¼–è¯‘å¥½çš„æ–°ç‰ˆnginxå¤åˆ¶è¿‡å»\n  {% endcodeblock %}\n\n6. ç¡®è®¤æ›´æ–°ç”Ÿæ•ˆ\n\n  {% codeblock %}\n  # /usr/sbin/nginx -t\n  nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\n  nginx: configuration file /etc/nginx/nginx.conf test is successful\n  # /usr/sbin/nginx -v\n  nginx version: nginx/1.9.9\n  {% endcodeblock %}\n\n7. æ›´æ–°Nginxé…ç½®æ–‡ä»¶\n\n  {% codeblock %}\n  server {\n      listen       80;\n      listen       443 ssl http2;\n      server_name  ppxu.me *.ppxu.me;\n\n      ...\n  {% endcodeblock %}\n\n8. é‡å¯Nginxå³å¯\n\nè®¿é—®ç½‘ç«™ï¼Œåœ¨å“åº”å¤´é‡Œå¯ä»¥çœ‹åˆ°`server:nginx/1.9.9`ï¼ŒåŒæ—¶ï¼Œåœ¨[chrome://net-internals/#http2](chrome://net-internals/#http2)ä¸Šé¢å¯ä»¥çœ‹åˆ°ç½‘ç«™å·²ç»æ”¯æŒäº†HTTP/2\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/http2.png](http://7xpbfd.com1.z0.glb.clouddn.com/http2.png)\n\n#### å‚è€ƒèµ„æ–™\n\n* [http://www.linuxde.net/2011/08/554.html](http://www.linuxde.net/2011/08/554.html)\n* [http://www.linuxidc.com/Linux/2014-02/96137.htm](http://www.linuxidc.com/Linux/2014-02/96137.htm)\n* [http://www.poluoluo.com/server/201403/265778.html](http://www.poluoluo.com/server/201403/265778.html)\n* [https://imququ.com/post/http2-resource.html](https://imququ.com/post/http2-resource.html)\n* [https://imququ.com/post/nginx-http2-patch.html](https://imququ.com/post/nginx-http2-patch.html)\n* [http://www.tuicool.com/articles/3eeIVfi](http://www.tuicool.com/articles/3eeIVfi)\n","source":"_posts/nginx-smooth-upgrade-and-config-http2.md","raw":"title: å¹³æ»‘å‡çº§Nginxå¹¶é…ç½®HTTP/2\ndate: 2015-12-23 12:47:40\ncategories: blog\ntags: [aliyun, ecs, centos, nginx, http2]\n---\nè¯è¯´SPDYå·²ç»è¢«HTTP/2ä¸Šä½äº†ï¼Œç½‘ç«™ç»§ç»­ç”¨SPDYä¹Ÿä¸åˆé€‚ï¼Œä»Šå¤©å°±è¶ç©ºå‡çº§äº†æœ€æ–°çš„Nginxï¼Œå¹¶å¼€å¯äº†HTTP/2ï¼Œä¸‹é¢æ˜¯æ“ä½œè¿‡ç¨‹\n\n<!--more-->\n\n1. æ£€æŸ¥å½“å‰Nginxç‰ˆæœ¬å’Œé…ç½®å‚æ•°\n\n  {% codeblock %}\n  # nginx -V\n  nginx version: nginx/1.8.0\n  built by gcc 4.8.2 20140120 (Red Hat 4.8.2-16) (GCC)\n  built with OpenSSL 1.0.1e-fips 11 Feb 2013\n  TLS SNI support enabled\n  configure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-openssl=../libressl-2.2.2 --with-http_v2_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --with-http_spdy_module --with-cc-opt='-O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic'\n  {% endcodeblock %}\n\n  è®°ä¸‹è¿™é‡Œçš„configure argumentsï¼Œåé¢ç¼–è¯‘çš„æ—¶å€™è¦ç”¨çš„ã€‚\n\n2. å®‰è£…PCREï¼ŒNginxçš„rewriteæ¨¡å—ä¾èµ–PCRE\n\n  {% codeblock %}\n  # cd /ppxu\n  # yum -y install make zlib zlib-devel gcc-c++ libtool\n  # wget http://nchc.dl.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz\n  # tar zxvf pcre-8.37.tar.gz\n  # cd pcre-8.37/\n  # ./configure\n  # make && make install\n  {% endcodeblock %}\n\n3. ä¸‹è½½OpenSSLï¼Œå¯ä»¥ä»[OpenSSL](https://www.openssl.org/)æˆ–è€…[LibreSSL](http://www.libressl.org/)ä¸‹è½½\n\n  {% codeblock %}\n  # cd /ppxu\n  # wget http://ftp.openbsd.org/pub/OpenBSD/LibreSSL/libressl-2.3.1.tar.gz\n  # tar zxvf libressl-2.3.1.tar.gz\n  {% endcodeblock %}\n\n4. ä¸‹è½½ï¼Œé…ç½®å¹¶ç¼–è¯‘Nginx\n\n  {% codeblock %}\n  # cd /ppxu\n  # wget http://nginx.org/download/nginx-1.9.9.tar.gz\n  # tar zxvf nginx-1.9.9.tar.gz\n  # cd nginx-1.9.9/\n  # ./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-openssl=../libressl-2.3.1 --with-http_v2_module --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-http_auth_request_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --with-cc-opt='-O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic'\n  # make\n  {% endcodeblock %}\n\n  å…¶ä¸­çš„`--with-http_v2_module`å°±æ˜¯å¼€å¯HTTP/2çš„è®¾ç½®ã€‚\n\n5. æ›¿æ¢Nginx\n\n  {% codeblock %}\n  # which nginx    //æŸ¥æ‰¾nginxè·¯å¾„\n  # mv /usr/sbin/nginx /usr/sbin/nginx.old    //å¤‡ä»½æ—§ç‰ˆnginx\n  # cp objs/nginx /usr/sbin/    //å°†ç¼–è¯‘å¥½çš„æ–°ç‰ˆnginxå¤åˆ¶è¿‡å»\n  {% endcodeblock %}\n\n6. ç¡®è®¤æ›´æ–°ç”Ÿæ•ˆ\n\n  {% codeblock %}\n  # /usr/sbin/nginx -t\n  nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\n  nginx: configuration file /etc/nginx/nginx.conf test is successful\n  # /usr/sbin/nginx -v\n  nginx version: nginx/1.9.9\n  {% endcodeblock %}\n\n7. æ›´æ–°Nginxé…ç½®æ–‡ä»¶\n\n  {% codeblock %}\n  server {\n      listen       80;\n      listen       443 ssl http2;\n      server_name  ppxu.me *.ppxu.me;\n\n      ...\n  {% endcodeblock %}\n\n8. é‡å¯Nginxå³å¯\n\nè®¿é—®ç½‘ç«™ï¼Œåœ¨å“åº”å¤´é‡Œå¯ä»¥çœ‹åˆ°`server:nginx/1.9.9`ï¼ŒåŒæ—¶ï¼Œåœ¨[chrome://net-internals/#http2](chrome://net-internals/#http2)ä¸Šé¢å¯ä»¥çœ‹åˆ°ç½‘ç«™å·²ç»æ”¯æŒäº†HTTP/2\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/http2.png](http://7xpbfd.com1.z0.glb.clouddn.com/http2.png)\n\n#### å‚è€ƒèµ„æ–™\n\n* [http://www.linuxde.net/2011/08/554.html](http://www.linuxde.net/2011/08/554.html)\n* [http://www.linuxidc.com/Linux/2014-02/96137.htm](http://www.linuxidc.com/Linux/2014-02/96137.htm)\n* [http://www.poluoluo.com/server/201403/265778.html](http://www.poluoluo.com/server/201403/265778.html)\n* [https://imququ.com/post/http2-resource.html](https://imququ.com/post/http2-resource.html)\n* [https://imququ.com/post/nginx-http2-patch.html](https://imququ.com/post/nginx-http2-patch.html)\n* [http://www.tuicool.com/articles/3eeIVfi](http://www.tuicool.com/articles/3eeIVfi)\n","slug":"nginx-smooth-upgrade-and-config-http2","published":1,"updated":"2015-12-24T13:26:42.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciikb4jbr000dnixxqhzo0v9x"},{"title":"é˜¿é‡Œäº‘ECSæ­å»ºHexo","date":"2015-12-19T02:31:27.000Z","_content":"æœ€è¿‘åˆšæ’¸äº†ä¸ªé˜¿é‡Œäº‘ECSæœåŠ¡å™¨æ¥æŠ˜è…¾ï¼Œå…ˆæ­ä¸ªHexoåšå®¢è€è€ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æ“ä½œæ­¥éª¤ã€‚\n\n<!--more-->\n\næ’¸ä¸»é€‰çš„æ˜¯æœ€ä¾¿å®œçš„é˜¿é‡Œäº‘ECSï¼Œåº”ä»˜æ—¥å¸¸å°æ’¸åº”è¯¥è¶³å¤Ÿäº†ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š\n\n{% codeblock %}\nCPUï¼š1æ ¸\nå†…å­˜ï¼š1024MB\næ“ä½œç³»ç»Ÿï¼šCentOS 7.0 64ä½\nå¸¦å®½ï¼š1Mbps\n{% endcodeblock %}\n\nä¸‹é¢æ˜¯å…·ä½“çš„æ‰‹æ³•ï¼š\n\n* è¿æ¥æœåŠ¡å™¨\n\n{% codeblock %}\n# ssh root@xx.xx.xx.xx\n{% endcodeblock %}\n\n* å®‰è£…Nodejsç¯å¢ƒ\n\n  * æ›´æ–°è½¯ä»¶æº\n\n  {% codeblock %}\n  # yum -y update\n  {% endcodeblock %}\n\n  * ä¸‹è½½Node.js\n\n  {% codeblock %}\n  # cd /usr/local/src\n  # wget http://nodejs.org/dist/node-latest.tar.gz\n  {% endcodeblock %}\n\n  * è§£å‹\n\n  {% codeblock %}\n  # tar zxf node-latest.tar.gz\n  # cd node-v*.*.*\n  {% endcodeblock %}\n\n  * ç¼–è¯‘å®‰è£…\n\n  {% codeblock %}\n  # ./configure\n  # make && make install\n  {% endcodeblock %}\n\n  * ç¡®è®¤å®‰è£…æˆåŠŸ\n\n  {% codeblock %}\n  # node -v\n  # npm -v\n  {% endcodeblock %}\n\n* å®‰è£…Hexo\n\n{% codeblock %}\n# npm install -g hexo-cli\n# hexo init blog\n# cd blog\n# npm install\n{% endcodeblock %}\n\n* å¯åŠ¨Hexo\n\n{% codeblock %}\n# hexo server    //æ™®é€šå¯åŠ¨\n# hexo server &  //é™é»˜å¯åŠ¨\n{% endcodeblock %}\n\nå¯åŠ¨æˆåŠŸåå°±å¯ä»¥é€šè¿‡æœåŠ¡å™¨çš„ipåœ°å€`xx.xx.xx.xx:4000`è®¿é—®åˆ°é¡µé¢äº†ï¼Œç„¶åéœ€è¦æŠŠ4000è½¬åˆ°80ä¸Šï¼Œé€šå¸¸åšæ³•æ˜¯ç”¨Nginxåšåå‘ä»£ç†ï¼Œè¿™é‡Œå…ˆç”¨iptablesé˜²ç«å¢™ç®€å•åšä¸€ä¸‹è½¬å‘å¤„ç†ã€‚\n\n* è½¬åˆ°80ç«¯å£\n\nç¼–è¾‘iptablesæ–‡ä»¶\n\n{% codeblock %}\n# vi /etc/sysconfig/iptables\n{% endcodeblock %}\n\nåŠ ä¸Šä¸‹é¢è¿™æ®µ\n\n{% codeblock %}\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 4000 -j ACCEPT\n\n*nat\n-A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 4000\nCOMMIT\n{% endcodeblock %}\n\né‡å¯iptablesæœåŠ¡\n\n{% codeblock %}\n# service iptables restart\n{% endcodeblock %}\n\nè¿™æ—¶å‘ç°æŠ¥é”™äº†\n\n{% codeblock %}\nFailed to restart iptables.service: Unit iptables.service failed to load: No such file or directory.\n{% endcodeblock %}\n\næŸ¥äº†ä¸€ä¸‹åŸæ¥æ˜¯CentOS 7ä¸­çš„é˜²ç«å¢™æ”¹æˆäº†firewalldï¼Œæ‰€ä»¥è¦æ¢å›iptablesã€‚\n\n{% codeblock %}\n# systemctl stop firewalld\n# systemctl mask firewalld\n# yum install iptables-services\n# systemctl enable iptables\n# service start iptables\n{% endcodeblock %}\n\nè¿™æ ·å°±å¯ä»¥é€šè¿‡ipåœ°å€`xx.xx.xx.xx`ç›´æ¥è®¿é—®ç½‘ç«™äº†ã€‚\n\n* åŸŸåè§£æ\n\nå†æ’¸ä¸ªåŸŸå`ppxu.me`ï¼ŒæŠŠ`@`å’Œ`www`éƒ½è§£æåˆ°æœåŠ¡å™¨ipåœ°å€å°±å¯ä»¥äº†ã€‚\n\n* gitç®¡ç†\n\nå†é…ç½®ä¸€ä¸‹gitç¯å¢ƒï¼Œä»¥åå°±å¯ä»¥é€šè¿‡gitæ¥ç®¡ç†å†…å®¹äº†ã€‚\n\n#### å‚è€ƒèµ„æ–™\n\n* [https://hexo.io/zh-cn/docs/index.html](https://hexo.io/zh-cn/docs/index.html)\n* [http://wsgzao.github.io/post/hexo-guide/](http://wsgzao.github.io/post/hexo-guide/)\n* [http://zipperary.com/categories/hexo/](http://zipperary.com/categories/hexo/)\n* [http://www.jianshu.com/p/73779eacb494](http://www.jianshu.com/p/73779eacb494)\n* [http://www.tuijiankan.com/2015/05/04/é˜¿é‡Œäº‘Centos6å®‰è£…é…ç½®Nodejsã€Nginxã€Hexoæ“ä½œè®°å½•/](http://www.tuijiankan.com/2015/05/04/%E9%98%BF%E9%87%8C%E4%BA%91Centos6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AENodejs%E3%80%81Nginx%E3%80%81Hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/)\n* [http://codybonney.com/installing-node-js-0-10-24-on-centos-6-4/](http://codybonney.com/installing-node-js-0-10-24-on-centos-6-4/)\n* [http://codybonney.com/redirect-port-80-to-another-port-using-iptables-on-centos/](http://codybonney.com/redirect-port-80-to-another-port-using-iptables-on-centos/)\n* [http://www.vkilo.com/rhel-7-iptables-service.html](http://www.vkilo.com/rhel-7-iptables-service.html)\n","source":"_posts/install-nodejs-and-hexo-in-aliyun-centos.md","raw":"title: é˜¿é‡Œäº‘ECSæ­å»ºHexo\ndate: 2015-12-19 10:31:27\ncategories: blog\ntags: [aliyun, ecs, centos, nodejs, hexo]\n---\næœ€è¿‘åˆšæ’¸äº†ä¸ªé˜¿é‡Œäº‘ECSæœåŠ¡å™¨æ¥æŠ˜è…¾ï¼Œå…ˆæ­ä¸ªHexoåšå®¢è€è€ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æ“ä½œæ­¥éª¤ã€‚\n\n<!--more-->\n\næ’¸ä¸»é€‰çš„æ˜¯æœ€ä¾¿å®œçš„é˜¿é‡Œäº‘ECSï¼Œåº”ä»˜æ—¥å¸¸å°æ’¸åº”è¯¥è¶³å¤Ÿäº†ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š\n\n{% codeblock %}\nCPUï¼š1æ ¸\nå†…å­˜ï¼š1024MB\næ“ä½œç³»ç»Ÿï¼šCentOS 7.0 64ä½\nå¸¦å®½ï¼š1Mbps\n{% endcodeblock %}\n\nä¸‹é¢æ˜¯å…·ä½“çš„æ‰‹æ³•ï¼š\n\n* è¿æ¥æœåŠ¡å™¨\n\n{% codeblock %}\n# ssh root@xx.xx.xx.xx\n{% endcodeblock %}\n\n* å®‰è£…Nodejsç¯å¢ƒ\n\n  * æ›´æ–°è½¯ä»¶æº\n\n  {% codeblock %}\n  # yum -y update\n  {% endcodeblock %}\n\n  * ä¸‹è½½Node.js\n\n  {% codeblock %}\n  # cd /usr/local/src\n  # wget http://nodejs.org/dist/node-latest.tar.gz\n  {% endcodeblock %}\n\n  * è§£å‹\n\n  {% codeblock %}\n  # tar zxf node-latest.tar.gz\n  # cd node-v*.*.*\n  {% endcodeblock %}\n\n  * ç¼–è¯‘å®‰è£…\n\n  {% codeblock %}\n  # ./configure\n  # make && make install\n  {% endcodeblock %}\n\n  * ç¡®è®¤å®‰è£…æˆåŠŸ\n\n  {% codeblock %}\n  # node -v\n  # npm -v\n  {% endcodeblock %}\n\n* å®‰è£…Hexo\n\n{% codeblock %}\n# npm install -g hexo-cli\n# hexo init blog\n# cd blog\n# npm install\n{% endcodeblock %}\n\n* å¯åŠ¨Hexo\n\n{% codeblock %}\n# hexo server    //æ™®é€šå¯åŠ¨\n# hexo server &  //é™é»˜å¯åŠ¨\n{% endcodeblock %}\n\nå¯åŠ¨æˆåŠŸåå°±å¯ä»¥é€šè¿‡æœåŠ¡å™¨çš„ipåœ°å€`xx.xx.xx.xx:4000`è®¿é—®åˆ°é¡µé¢äº†ï¼Œç„¶åéœ€è¦æŠŠ4000è½¬åˆ°80ä¸Šï¼Œé€šå¸¸åšæ³•æ˜¯ç”¨Nginxåšåå‘ä»£ç†ï¼Œè¿™é‡Œå…ˆç”¨iptablesé˜²ç«å¢™ç®€å•åšä¸€ä¸‹è½¬å‘å¤„ç†ã€‚\n\n* è½¬åˆ°80ç«¯å£\n\nç¼–è¾‘iptablesæ–‡ä»¶\n\n{% codeblock %}\n# vi /etc/sysconfig/iptables\n{% endcodeblock %}\n\nåŠ ä¸Šä¸‹é¢è¿™æ®µ\n\n{% codeblock %}\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 4000 -j ACCEPT\n\n*nat\n-A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 4000\nCOMMIT\n{% endcodeblock %}\n\né‡å¯iptablesæœåŠ¡\n\n{% codeblock %}\n# service iptables restart\n{% endcodeblock %}\n\nè¿™æ—¶å‘ç°æŠ¥é”™äº†\n\n{% codeblock %}\nFailed to restart iptables.service: Unit iptables.service failed to load: No such file or directory.\n{% endcodeblock %}\n\næŸ¥äº†ä¸€ä¸‹åŸæ¥æ˜¯CentOS 7ä¸­çš„é˜²ç«å¢™æ”¹æˆäº†firewalldï¼Œæ‰€ä»¥è¦æ¢å›iptablesã€‚\n\n{% codeblock %}\n# systemctl stop firewalld\n# systemctl mask firewalld\n# yum install iptables-services\n# systemctl enable iptables\n# service start iptables\n{% endcodeblock %}\n\nè¿™æ ·å°±å¯ä»¥é€šè¿‡ipåœ°å€`xx.xx.xx.xx`ç›´æ¥è®¿é—®ç½‘ç«™äº†ã€‚\n\n* åŸŸåè§£æ\n\nå†æ’¸ä¸ªåŸŸå`ppxu.me`ï¼ŒæŠŠ`@`å’Œ`www`éƒ½è§£æåˆ°æœåŠ¡å™¨ipåœ°å€å°±å¯ä»¥äº†ã€‚\n\n* gitç®¡ç†\n\nå†é…ç½®ä¸€ä¸‹gitç¯å¢ƒï¼Œä»¥åå°±å¯ä»¥é€šè¿‡gitæ¥ç®¡ç†å†…å®¹äº†ã€‚\n\n#### å‚è€ƒèµ„æ–™\n\n* [https://hexo.io/zh-cn/docs/index.html](https://hexo.io/zh-cn/docs/index.html)\n* [http://wsgzao.github.io/post/hexo-guide/](http://wsgzao.github.io/post/hexo-guide/)\n* [http://zipperary.com/categories/hexo/](http://zipperary.com/categories/hexo/)\n* [http://www.jianshu.com/p/73779eacb494](http://www.jianshu.com/p/73779eacb494)\n* [http://www.tuijiankan.com/2015/05/04/é˜¿é‡Œäº‘Centos6å®‰è£…é…ç½®Nodejsã€Nginxã€Hexoæ“ä½œè®°å½•/](http://www.tuijiankan.com/2015/05/04/%E9%98%BF%E9%87%8C%E4%BA%91Centos6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AENodejs%E3%80%81Nginx%E3%80%81Hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/)\n* [http://codybonney.com/installing-node-js-0-10-24-on-centos-6-4/](http://codybonney.com/installing-node-js-0-10-24-on-centos-6-4/)\n* [http://codybonney.com/redirect-port-80-to-another-port-using-iptables-on-centos/](http://codybonney.com/redirect-port-80-to-another-port-using-iptables-on-centos/)\n* [http://www.vkilo.com/rhel-7-iptables-service.html](http://www.vkilo.com/rhel-7-iptables-service.html)\n","slug":"install-nodejs-and-hexo-in-aliyun-centos","published":1,"updated":"2015-12-23T13:47:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciikb4jbw000pnixxa3l69vxk"},{"title":"Hello World","_content":"Welcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"title: Hello World\n---\nWelcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2015-12-18T14:31:17.000Z","updated":"2015-12-18T14:31:17.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciikb4jc1000xnixx8uyjgprb"},{"title":"è®©Hexoæ”¯æŒemojiè¡¨æƒ…","date":"2015-12-24T13:23:43.000Z","_content":"Hexoçš„æ–‡ç« å†…å®¹é»˜è®¤æ˜¯ä¸æ”¯æŒemojiè¡¨æƒ…çš„ï¼Œä¸ºäº†è®©æ–‡ç« æ›´ç”ŸåŠ¨ï¼Œä»Šå¤©å°±ç ”ç©¶äº†ä¸‹æ€ä¹ˆæ”¯æŒemojiã€‚\n\n<!--more-->\n\nHexoé»˜è®¤çš„markdownç¼–è¯‘æ’ä»¶æ˜¯[hexo-renderer-marked](https://github.com/hexojs/hexo-renderer-marked)ï¼Œçœ‹äº†ä¸€ä¸‹ç›¸å…³æ–‡æ¡£ï¼Œå¥½åƒæ²¡åŠæ³•æ”¯æŒemojiï¼Œè¿˜å¥½åœ¨Hexoçš„[plugins](https://hexo.io/plugins/)é¡µï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å¦å¤–ä¸€ä¸ªmarkdownæ’ä»¶[hexo-renderer-markdown-it](https://github.com/celsomiranda/hexo-renderer-markdown-it)ï¼Œè€Œä¸”å·ç§°é€Ÿåº¦æ¯”é»˜è®¤çš„è¿˜è¦å¿«ï¼Œæœ€ä¸»è¦çš„æ˜¯ï¼Œåœ¨[markdown-it](https://github.com/markdown-it/markdown-it)çš„æ–‡æ¡£é‡Œé¢ï¼Œæˆ‘ä»¬å‘ç°å®ƒå¯ä»¥é€šè¿‡pluginsçš„æ–¹å¼æ”¯æŒ[emoji](https://github.com/markdown-it/markdown-it-emoji)ã€‚\n\nä¸‹é¢æˆ‘ä»¬å°±æ¥æ›¿æ¢markdownæ’ä»¶\n\n{% codeblock %}\n# cd /ppxu/blog/\n# cnpm un hexo-renderer-marked --save\n# cnpm i hexo-renderer-markdown-it --save\n{% endcodeblock %}\n\nä¸è¿‡æ­¤æ—¶çš„hexo-renderer-markdown-itè¿˜æ˜¯ç”¨ä¸äº†emojiçš„ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šemojiçš„plugin\n\n{% codeblock %}\n# cd node_modules/hexo-renderer-markdown-it/\n# cnpm install markdown-it-emoji --save\n{% endcodeblock %}\n\nç„¶åç¼–è¾‘Hexoçš„é…ç½®æ–‡ä»¶`_config.yml`\n\n{% codeblock %}\nmarkdown:\n  render:\n    html: true\n    xhtmlOut: false\n    breaks: false\n    linkify: true\n    typographer: true\n    quotes: 'â€œâ€â€˜â€™'\n  plugins:\n    - markdown-it-footnote\n    - markdown-it-sup\n    - markdown-it-sub\n    - markdown-it-abbr\n    - markdown-it-emoji\n  anchors:\n    level: 2\n    collisionSuffix: 'v'\n    permalink: true\n    permalinkClass: header-anchor\n    permalinkSymbol: Â¶\n{% endcodeblock %}\n\nå…³é”®å°±æ˜¯åœ¨pluginsé‡ŒåŠ ä¸Š`- markdown-it-emoji`ï¼Œå…¶ä»–çš„é…ç½®è¯´æ˜å¯ä»¥å‚è§[wiki](https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki/Advanced-Configuration)ã€‚\n\né‡å¯HexoæœåŠ¡ï¼Œå³å¯ç”Ÿæ•ˆï¼Œè¿™é‡Œè¾“å…¥`:smile: :smirk: :relieved:`ï¼Œæ•ˆæœ :smile: :smirk: :relieved:\n\nå½“ç„¶ç›´æ¥è¾“å…¥è¡¨æƒ…ä¹Ÿæ˜¯å¯ä»¥çš„ ğŸ˜‚\n","source":"_posts/enable-emoji-in-hexo.md","raw":"title: è®©Hexoæ”¯æŒemojiè¡¨æƒ…\ndate: 2015-12-24 21:23:43\ncategories: blog\ntags: [hexo, markdown, emoji]\n---\nHexoçš„æ–‡ç« å†…å®¹é»˜è®¤æ˜¯ä¸æ”¯æŒemojiè¡¨æƒ…çš„ï¼Œä¸ºäº†è®©æ–‡ç« æ›´ç”ŸåŠ¨ï¼Œä»Šå¤©å°±ç ”ç©¶äº†ä¸‹æ€ä¹ˆæ”¯æŒemojiã€‚\n\n<!--more-->\n\nHexoé»˜è®¤çš„markdownç¼–è¯‘æ’ä»¶æ˜¯[hexo-renderer-marked](https://github.com/hexojs/hexo-renderer-marked)ï¼Œçœ‹äº†ä¸€ä¸‹ç›¸å…³æ–‡æ¡£ï¼Œå¥½åƒæ²¡åŠæ³•æ”¯æŒemojiï¼Œè¿˜å¥½åœ¨Hexoçš„[plugins](https://hexo.io/plugins/)é¡µï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å¦å¤–ä¸€ä¸ªmarkdownæ’ä»¶[hexo-renderer-markdown-it](https://github.com/celsomiranda/hexo-renderer-markdown-it)ï¼Œè€Œä¸”å·ç§°é€Ÿåº¦æ¯”é»˜è®¤çš„è¿˜è¦å¿«ï¼Œæœ€ä¸»è¦çš„æ˜¯ï¼Œåœ¨[markdown-it](https://github.com/markdown-it/markdown-it)çš„æ–‡æ¡£é‡Œé¢ï¼Œæˆ‘ä»¬å‘ç°å®ƒå¯ä»¥é€šè¿‡pluginsçš„æ–¹å¼æ”¯æŒ[emoji](https://github.com/markdown-it/markdown-it-emoji)ã€‚\n\nä¸‹é¢æˆ‘ä»¬å°±æ¥æ›¿æ¢markdownæ’ä»¶\n\n{% codeblock %}\n# cd /ppxu/blog/\n# cnpm un hexo-renderer-marked --save\n# cnpm i hexo-renderer-markdown-it --save\n{% endcodeblock %}\n\nä¸è¿‡æ­¤æ—¶çš„hexo-renderer-markdown-itè¿˜æ˜¯ç”¨ä¸äº†emojiçš„ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šemojiçš„plugin\n\n{% codeblock %}\n# cd node_modules/hexo-renderer-markdown-it/\n# cnpm install markdown-it-emoji --save\n{% endcodeblock %}\n\nç„¶åç¼–è¾‘Hexoçš„é…ç½®æ–‡ä»¶`_config.yml`\n\n{% codeblock %}\nmarkdown:\n  render:\n    html: true\n    xhtmlOut: false\n    breaks: false\n    linkify: true\n    typographer: true\n    quotes: 'â€œâ€â€˜â€™'\n  plugins:\n    - markdown-it-footnote\n    - markdown-it-sup\n    - markdown-it-sub\n    - markdown-it-abbr\n    - markdown-it-emoji\n  anchors:\n    level: 2\n    collisionSuffix: 'v'\n    permalink: true\n    permalinkClass: header-anchor\n    permalinkSymbol: Â¶\n{% endcodeblock %}\n\nå…³é”®å°±æ˜¯åœ¨pluginsé‡ŒåŠ ä¸Š`- markdown-it-emoji`ï¼Œå…¶ä»–çš„é…ç½®è¯´æ˜å¯ä»¥å‚è§[wiki](https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki/Advanced-Configuration)ã€‚\n\né‡å¯HexoæœåŠ¡ï¼Œå³å¯ç”Ÿæ•ˆï¼Œè¿™é‡Œè¾“å…¥`:smile: :smirk: :relieved:`ï¼Œæ•ˆæœ :smile: :smirk: :relieved:\n\nå½“ç„¶ç›´æ¥è¾“å…¥è¡¨æƒ…ä¹Ÿæ˜¯å¯ä»¥çš„ ğŸ˜‚\n","slug":"enable-emoji-in-hexo","published":1,"updated":"2015-12-25T02:45:15.000Z","_id":"ciikb4jc4000ynixxkkm3huk8","comments":1,"layout":"post","photos":[],"link":""},{"title":"é˜¿é‡Œäº‘ECSé…ç½®Nginxå’ŒSSL","date":"2015-12-20T14:01:05.000Z","_content":"ä»Šå¤©ç»™æœåŠ¡å™¨å®‰è£…äº†Nginxï¼Œå¹¶é…ç½®äº†SSLï¼Œç½‘å€å·¦è¾¹ç»ˆäºæœ‰èŒèŒå“’çš„å°ç»¿é”äº†ï¼Œè¿™é‡Œè¿˜æ˜¯åšä¸€ä¸‹è®°å½•ã€‚\n\n<!--more-->\n\nå…ˆæ˜¯å®‰è£…Nginx\n\n{% codeblock %}\n# wget http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n# rpm -ivh nginx-release-centos-7-0.el7.ngx.noarch.rpm\n# yum install nginx\n{% endcodeblock %}\n\nå¯åŠ¨Nginx\n\n{% codeblock %}\n# systemctl start nginx\n{% endcodeblock %}\n\nè¿™æ ·NginxæœåŠ¡å°±å·²ç»å¯ä»¥è®¿é—®äº†ï¼Œè¾“å…¥æœåŠ¡å™¨ipåœ°å€å°±å¯ä»¥çœ‹åˆ°Nginxä¸»é¡µï¼Œç„¶åæˆ‘ä»¬éœ€è¦æŠŠHexoæœåŠ¡çš„4000ç«¯å£è½¬å‘åˆ°Nginxçš„80ç«¯å£ï¼ŒæŸ¥çœ‹Nginxé…ç½®æ–‡ä»¶`/etc/nginx/nginx.conf`ï¼Œçœ‹åˆ°éœ€è¦ä¿®æ”¹`conf.d`ç›®å½•ä¸‹çš„`/etc/nginx/conf.d/default.conf`æ–‡ä»¶\n\n{% codeblock %}\nserver {\n    listen       80;\n    server_name  ppxu.me *.ppxu.me;\n\n    location / {\n        proxy_pass          http://127.0.0.1:4000/;\n        proxy_redirect      off;\n        proxy_set_header    X-Real-IP       $remote_addr;\n        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    ...\n{% endcodeblock %}\n\né‡å¯Nginx\n\n{% codeblock %}\n# systemctl restart nginx\n{% endcodeblock %}\n\nç°åœ¨è®¿é—®ç½‘ç«™ï¼Œåœ¨å“åº”å¤´é‡Œå°±å¯ä»¥çœ‹åˆ°`Server:nginx/1.8.0`ï¼Œè¯´æ˜Nginxç¯å¢ƒå·²ç»æ­£å¸¸äº†ï¼Œä¸‹é¢å‡†å¤‡æä¸ŠHTTPSã€‚\n\nè¿™é‡Œå°±ä¸è¯¦è¿°HTTPSçš„åŸç†äº†ï¼Œå¯¹æˆ‘ä»¬è¿™ä¸ªå°åšå®¢è€Œè¨€ï¼Œæä¸ªå…è´¹çš„SSLè¯ä¹¦å°±å¯ä»¥äº†ï¼Œè¿™é‡Œæ¨è[https://startssl.com/](https://startssl.com/)æˆ–è€…[https://www.wosign.com/](https://www.wosign.com/)ï¼Œç”³è¯·æˆåŠŸåæŠŠä¸‹è½½ä¸‹æ¥çš„å¯¹åº”ç‰ˆæœ¬çš„è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼ŒåŒ…å«å…¬é’¥`.crt`å’Œç§é’¥`.key`ã€‚\n\nç„¶åç¼–è¾‘`/etc/nginx/conf.d/default.conf`\n\n{% codeblock %}\nserver {\n    listen       80;\n    listen       443 ssl;\n    server_name  ppxu.me *.ppxu.me;\n\n    ssl on;\n    ssl_certificate /etc/nginx/conf.d/ppxu.crt;\n    ssl_certificate_key /etc/nginx/conf.d/ppxu.key;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers 'AES128+EECDH:AES128+EDH:!aNULL';\n    ssl_prefer_server_ciphers on;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n\n    location / {\n        proxy_pass          http://127.0.0.1:4000/;\n        proxy_redirect      off;\n        proxy_set_header    X-Real-IP       $remote_addr;\n        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    ...\n{% endcodeblock %}\n\né‡å¯Nginxï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç°åœ¨å°±å¯ä»¥é€šè¿‡`https://ppxu.me`è®¿é—®åˆ°æœ¬ç½‘ç«™äº†ï¼Œä½†æ˜¯ç›´æ¥å¦‚æœç›´æ¥è¾“å…¥`ppxu.me`çš„è¯ä¼šæŠ¥400é”™è¯¯ï¼Œæ˜¾ç¤º\n\n{% codeblock %}\nThe plain HTTP request was sent to HTTPS port\n{% endcodeblock %}\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†httpçš„è¯·æ±‚å¼ºåˆ¶ä½¿ç”¨httpsè®¿é—®ï¼Œæœ€æ–¹ä¾¿çš„åŠæ³•æ˜¯å¯ç”¨HSTSï¼Œåœ¨nginxçš„é…ç½®ä¸­æ·»åŠ \n\n{% codeblock %}\nadd_header Strict-Transport-Security \"max-age=31536000; includeSubdomains\";\n{% endcodeblock %}\n\nè¿™æ ·åªè¦æ˜¯æ”¯æŒHSTSçš„æµè§ˆå™¨ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®Œæˆhttpåˆ°httpsçš„æ›¿æ¢ï¼Œè€Œä¸”æ˜¯ç›´æ¥åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆçš„ï¼Œå¯¹äºä¸æ”¯æŒçš„æµè§ˆå™¨ï¼Œåªèƒ½åœ¨æœåŠ¡å™¨åšé‡å®šå‘äº†ï¼Œç»§ç»­åœ¨Nginxé…ç½®ä¸­æ·»åŠ ä¸€æ¡è§„åˆ™\n\n{% codeblock %}\nerror_page 497  https://$host$uri;\n{% endcodeblock %}\n\nè¿™æ ·æˆ‘ä»¬çš„ç½‘ç«™å°±å·²ç»å®Œå…¨æ”¯æŒäº†HTTPSè®¿é—®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™[https://www.ssllabs.com/ssltest/analyze.html](https://www.ssllabs.com/ssltest/analyze.html)å¯¹ç½‘é¡µè¿›è¡Œå®‰å…¨è¯„æµ‹ï¼Œå¦‚æœè¯„åˆ†ä¸å¤Ÿé«˜çš„è¯å¯ä»¥å†çœ‹çœ‹å¦‚ä½•[åŠ å¼ºnginxçš„SSLå®‰å…¨](http://www.oschina.net/translate/strong_ssl_security_on_nginx)ã€‚\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/ssl.png](http://7xpbfd.com1.z0.glb.clouddn.com/ssl.png)\n\n#### å‚è€ƒèµ„æ–™\n\n* [http://codybonney.com/installing-nginx-on-centos-6-4/](http://codybonney.com/installing-nginx-on-centos-6-4/)\n* [http://www.tuijiankan.com/2015/05/04/é˜¿é‡Œäº‘Centos6å®‰è£…é…ç½®Nodejsã€Nginxã€Hexoæ“ä½œè®°å½•/](http://www.tuijiankan.com/2015/05/04/%E9%98%BF%E9%87%8C%E4%BA%91Centos6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AENodejs%E3%80%81Nginx%E3%80%81Hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/)\n* [http://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/](http://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/)\n* [https://imququ.com/post/switch-to-https.html](https://imququ.com/post/switch-to-https.html)\n* [https://imququ.com/post/sth-about-switch-to-https.html](https://imququ.com/post/sth-about-switch-to-https.html)\n* [http://www.ha97.com/5194.html](http://www.ha97.com/5194.html)\n* [http://www.cnblogs.com/yanghuahui/archive/2012/06/25/2561568.html](http://www.cnblogs.com/yanghuahui/archive/2012/06/25/2561568.html)\n* [http://www.codeceo.com/article/nginx-ssl-nodejs.html](http://www.codeceo.com/article/nginx-ssl-nodejs.html)\n* [http://www.ttlsa.com/nginx/nginx-node-js/](http://www.ttlsa.com/nginx/nginx-node-js/)\n* [http://blog.csdn.net/wzy_1988/article/details/8549290](http://blog.csdn.net/wzy_1988/article/details/8549290)\n* [http://www.tutugreen.com/wordpress/upgrade-ssl/](http://www.tutugreen.com/wordpress/upgrade-ssl/)\n* [http://www.oschina.net/translate/strong_ssl_security_on_nginx](http://www.oschina.net/translate/strong_ssl_security_on_nginx)\n* [http://blog.jobbole.com/44844/](http://blog.jobbole.com/44844/)\n* [http://blog.jobbole.com/80591/](http://blog.jobbole.com/80591/)\n* [https://imququ.com/post/my-nginx-conf-for-wpo.html](https://imququ.com/post/my-nginx-conf-for-wpo.html)\n","source":"_posts/config-ssl-in-nginx.md","raw":"title: é˜¿é‡Œäº‘ECSé…ç½®Nginxå’ŒSSL\ndate: 2015-12-20 22:01:05\ncategories: blog\ntags: [aliyun, ecs, centos, nginx, ssl, https]\n---\nä»Šå¤©ç»™æœåŠ¡å™¨å®‰è£…äº†Nginxï¼Œå¹¶é…ç½®äº†SSLï¼Œç½‘å€å·¦è¾¹ç»ˆäºæœ‰èŒèŒå“’çš„å°ç»¿é”äº†ï¼Œè¿™é‡Œè¿˜æ˜¯åšä¸€ä¸‹è®°å½•ã€‚\n\n<!--more-->\n\nå…ˆæ˜¯å®‰è£…Nginx\n\n{% codeblock %}\n# wget http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n# rpm -ivh nginx-release-centos-7-0.el7.ngx.noarch.rpm\n# yum install nginx\n{% endcodeblock %}\n\nå¯åŠ¨Nginx\n\n{% codeblock %}\n# systemctl start nginx\n{% endcodeblock %}\n\nè¿™æ ·NginxæœåŠ¡å°±å·²ç»å¯ä»¥è®¿é—®äº†ï¼Œè¾“å…¥æœåŠ¡å™¨ipåœ°å€å°±å¯ä»¥çœ‹åˆ°Nginxä¸»é¡µï¼Œç„¶åæˆ‘ä»¬éœ€è¦æŠŠHexoæœåŠ¡çš„4000ç«¯å£è½¬å‘åˆ°Nginxçš„80ç«¯å£ï¼ŒæŸ¥çœ‹Nginxé…ç½®æ–‡ä»¶`/etc/nginx/nginx.conf`ï¼Œçœ‹åˆ°éœ€è¦ä¿®æ”¹`conf.d`ç›®å½•ä¸‹çš„`/etc/nginx/conf.d/default.conf`æ–‡ä»¶\n\n{% codeblock %}\nserver {\n    listen       80;\n    server_name  ppxu.me *.ppxu.me;\n\n    location / {\n        proxy_pass          http://127.0.0.1:4000/;\n        proxy_redirect      off;\n        proxy_set_header    X-Real-IP       $remote_addr;\n        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    ...\n{% endcodeblock %}\n\né‡å¯Nginx\n\n{% codeblock %}\n# systemctl restart nginx\n{% endcodeblock %}\n\nç°åœ¨è®¿é—®ç½‘ç«™ï¼Œåœ¨å“åº”å¤´é‡Œå°±å¯ä»¥çœ‹åˆ°`Server:nginx/1.8.0`ï¼Œè¯´æ˜Nginxç¯å¢ƒå·²ç»æ­£å¸¸äº†ï¼Œä¸‹é¢å‡†å¤‡æä¸ŠHTTPSã€‚\n\nè¿™é‡Œå°±ä¸è¯¦è¿°HTTPSçš„åŸç†äº†ï¼Œå¯¹æˆ‘ä»¬è¿™ä¸ªå°åšå®¢è€Œè¨€ï¼Œæä¸ªå…è´¹çš„SSLè¯ä¹¦å°±å¯ä»¥äº†ï¼Œè¿™é‡Œæ¨è[https://startssl.com/](https://startssl.com/)æˆ–è€…[https://www.wosign.com/](https://www.wosign.com/)ï¼Œç”³è¯·æˆåŠŸåæŠŠä¸‹è½½ä¸‹æ¥çš„å¯¹åº”ç‰ˆæœ¬çš„è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼ŒåŒ…å«å…¬é’¥`.crt`å’Œç§é’¥`.key`ã€‚\n\nç„¶åç¼–è¾‘`/etc/nginx/conf.d/default.conf`\n\n{% codeblock %}\nserver {\n    listen       80;\n    listen       443 ssl;\n    server_name  ppxu.me *.ppxu.me;\n\n    ssl on;\n    ssl_certificate /etc/nginx/conf.d/ppxu.crt;\n    ssl_certificate_key /etc/nginx/conf.d/ppxu.key;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers 'AES128+EECDH:AES128+EDH:!aNULL';\n    ssl_prefer_server_ciphers on;\n    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n    ssl_stapling on;\n    ssl_stapling_verify on;\n\n    location / {\n        proxy_pass          http://127.0.0.1:4000/;\n        proxy_redirect      off;\n        proxy_set_header    X-Real-IP       $remote_addr;\n        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n\n    ...\n{% endcodeblock %}\n\né‡å¯Nginxï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç°åœ¨å°±å¯ä»¥é€šè¿‡`https://ppxu.me`è®¿é—®åˆ°æœ¬ç½‘ç«™äº†ï¼Œä½†æ˜¯ç›´æ¥å¦‚æœç›´æ¥è¾“å…¥`ppxu.me`çš„è¯ä¼šæŠ¥400é”™è¯¯ï¼Œæ˜¾ç¤º\n\n{% codeblock %}\nThe plain HTTP request was sent to HTTPS port\n{% endcodeblock %}\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†httpçš„è¯·æ±‚å¼ºåˆ¶ä½¿ç”¨httpsè®¿é—®ï¼Œæœ€æ–¹ä¾¿çš„åŠæ³•æ˜¯å¯ç”¨HSTSï¼Œåœ¨nginxçš„é…ç½®ä¸­æ·»åŠ \n\n{% codeblock %}\nadd_header Strict-Transport-Security \"max-age=31536000; includeSubdomains\";\n{% endcodeblock %}\n\nè¿™æ ·åªè¦æ˜¯æ”¯æŒHSTSçš„æµè§ˆå™¨ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®Œæˆhttpåˆ°httpsçš„æ›¿æ¢ï¼Œè€Œä¸”æ˜¯ç›´æ¥åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆçš„ï¼Œå¯¹äºä¸æ”¯æŒçš„æµè§ˆå™¨ï¼Œåªèƒ½åœ¨æœåŠ¡å™¨åšé‡å®šå‘äº†ï¼Œç»§ç»­åœ¨Nginxé…ç½®ä¸­æ·»åŠ ä¸€æ¡è§„åˆ™\n\n{% codeblock %}\nerror_page 497  https://$host$uri;\n{% endcodeblock %}\n\nè¿™æ ·æˆ‘ä»¬çš„ç½‘ç«™å°±å·²ç»å®Œå…¨æ”¯æŒäº†HTTPSè®¿é—®ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç½‘ç«™[https://www.ssllabs.com/ssltest/analyze.html](https://www.ssllabs.com/ssltest/analyze.html)å¯¹ç½‘é¡µè¿›è¡Œå®‰å…¨è¯„æµ‹ï¼Œå¦‚æœè¯„åˆ†ä¸å¤Ÿé«˜çš„è¯å¯ä»¥å†çœ‹çœ‹å¦‚ä½•[åŠ å¼ºnginxçš„SSLå®‰å…¨](http://www.oschina.net/translate/strong_ssl_security_on_nginx)ã€‚\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/ssl.png](http://7xpbfd.com1.z0.glb.clouddn.com/ssl.png)\n\n#### å‚è€ƒèµ„æ–™\n\n* [http://codybonney.com/installing-nginx-on-centos-6-4/](http://codybonney.com/installing-nginx-on-centos-6-4/)\n* [http://www.tuijiankan.com/2015/05/04/é˜¿é‡Œäº‘Centos6å®‰è£…é…ç½®Nodejsã€Nginxã€Hexoæ“ä½œè®°å½•/](http://www.tuijiankan.com/2015/05/04/%E9%98%BF%E9%87%8C%E4%BA%91Centos6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AENodejs%E3%80%81Nginx%E3%80%81Hexo%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/)\n* [http://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/](http://www.barretlee.com/blog/2015/10/05/how-to-build-a-https-server/)\n* [https://imququ.com/post/switch-to-https.html](https://imququ.com/post/switch-to-https.html)\n* [https://imququ.com/post/sth-about-switch-to-https.html](https://imququ.com/post/sth-about-switch-to-https.html)\n* [http://www.ha97.com/5194.html](http://www.ha97.com/5194.html)\n* [http://www.cnblogs.com/yanghuahui/archive/2012/06/25/2561568.html](http://www.cnblogs.com/yanghuahui/archive/2012/06/25/2561568.html)\n* [http://www.codeceo.com/article/nginx-ssl-nodejs.html](http://www.codeceo.com/article/nginx-ssl-nodejs.html)\n* [http://www.ttlsa.com/nginx/nginx-node-js/](http://www.ttlsa.com/nginx/nginx-node-js/)\n* [http://blog.csdn.net/wzy_1988/article/details/8549290](http://blog.csdn.net/wzy_1988/article/details/8549290)\n* [http://www.tutugreen.com/wordpress/upgrade-ssl/](http://www.tutugreen.com/wordpress/upgrade-ssl/)\n* [http://www.oschina.net/translate/strong_ssl_security_on_nginx](http://www.oschina.net/translate/strong_ssl_security_on_nginx)\n* [http://blog.jobbole.com/44844/](http://blog.jobbole.com/44844/)\n* [http://blog.jobbole.com/80591/](http://blog.jobbole.com/80591/)\n* [https://imququ.com/post/my-nginx-conf-for-wpo.html](https://imququ.com/post/my-nginx-conf-for-wpo.html)\n","slug":"config-ssl-in-nginx","published":1,"updated":"2015-12-23T13:46:43.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciikb4jc90015nixxzaatdijw"},{"title":"Nginxé…ç½®SPDY","date":"2015-12-22T09:32:20.000Z","_content":"æœ¬æ¥å‡†å¤‡ç»™æœåŠ¡å™¨æä¸ªHTTP/2ä¸Šå»ï¼Œå‘ç°Nginxè¦åˆ°1.9.5æ‰å¯ä»¥æ”¯æŒHTTP/2åè®®ï¼Œç°åœ¨æœåŠ¡å™¨ä¸Šçš„Nginxç‰ˆæœ¬æ‰1.8.0ï¼Œæƒ³äº†æƒ³å…ˆè¯•è¯•SPDYå§ï¼Œæ”¹å¤©å†æ¥å‡çº§Nginxå’ŒHTTP/2ã€‚\n\n<!--more-->\n\né¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹æœ¬åœ°çš„Nginxæ˜¯ä¸æ˜¯å·²ç»åŒ…å«äº†SPDY\n\n{% codeblock %}\n# nginx -V |grep spdy\n{% endcodeblock %}\n\nå¦‚æœçœ‹åˆ°æœ‰`â€“-with-http_spdy_module`ï¼Œå°±è¯´æ˜å·²ç»æ”¯æŒäº†SPDYï¼Œå¦‚æœæ²¡æœ‰çš„è¯éœ€è¦é‡æ–°ä¸‹è½½å’Œç¼–è¯‘Nginxï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Š`--with-http_spdy_module`é€‰é¡¹ã€‚\n\nç„¶åä¿®æ”¹Nginxçš„é…ç½®æ–‡ä»¶\n\n{% codeblock %}\nserver {\n    listen       80;\n    listen       443 ssl spdy;\n    server_name  ppxu.me *.ppxu.me;\n\n    add_header   Alternate-Protocol  443:npn-spdy/3.1;\n    ...\n{% endcodeblock %}\n\né‡å¯Nginxï¼ŒSPDYå°±å¯åŠ¨æˆåŠŸäº†ã€‚\n\nè®¿é—®ç½‘ç«™ï¼Œç„¶ååœ¨chromeä¸­æ‰“å¼€`chrome://net-internals/#http2`ï¼Œå°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹å·²ç»æ”¯æŒäº†SPDY3.1\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/spdy.png](http://7xpbfd.com1.z0.glb.clouddn.com/spdy.png)\n\nè¿˜å¯ä»¥åœ¨è¿™ä¸ª[ç½‘ç«™](https://spdycheck.org/)æ£€æŸ¥SPDYå¯åŠ¨æƒ…å†µã€‚\n\nä¸è¿‡SPDYåè®®å·²ç»åºŸå¼ƒäº†ï¼Œè¿˜æ˜¯èµ¶ç´§æä¸ŠHTTP/2æ‰æ˜¯æ­£äº‹ã€‚\n\n#### å‚è€ƒèµ„æ–™\n\n* [http://nginx.org/](http://nginx.org/)\n\n* [http://www.stefanwille.com/2013/04/using-spdy-with-nginx-1-4/](http://www.stefanwille.com/2013/04/using-spdy-with-nginx-1-4/)\n\n* [http://www.linuxidc.com/Linux/2015-09/123251.htm](http://www.linuxidc.com/Linux/2015-09/123251.htm)\n\n* [http://www.linuxidc.com/Linux/2015-02/112979.htm](http://www.linuxidc.com/Linux/2015-02/112979.htm)\n\n* [http://www.jb51.net/article/59017.htm](http://www.jb51.net/article/59017.htm)\n\n* [http://www.tuicool.com/articles/2mi63q](http://www.tuicool.com/articles/2mi63q)\n","source":"_posts/config-spdy-in-nginx.md","raw":"title: Nginxé…ç½®SPDY\ndate: 2015-12-22 17:32:20\ncategories: blog\ntags: [aliyun, ecs, centos, nginx, spdy]\n---\næœ¬æ¥å‡†å¤‡ç»™æœåŠ¡å™¨æä¸ªHTTP/2ä¸Šå»ï¼Œå‘ç°Nginxè¦åˆ°1.9.5æ‰å¯ä»¥æ”¯æŒHTTP/2åè®®ï¼Œç°åœ¨æœåŠ¡å™¨ä¸Šçš„Nginxç‰ˆæœ¬æ‰1.8.0ï¼Œæƒ³äº†æƒ³å…ˆè¯•è¯•SPDYå§ï¼Œæ”¹å¤©å†æ¥å‡çº§Nginxå’ŒHTTP/2ã€‚\n\n<!--more-->\n\né¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹æœ¬åœ°çš„Nginxæ˜¯ä¸æ˜¯å·²ç»åŒ…å«äº†SPDY\n\n{% codeblock %}\n# nginx -V |grep spdy\n{% endcodeblock %}\n\nå¦‚æœçœ‹åˆ°æœ‰`â€“-with-http_spdy_module`ï¼Œå°±è¯´æ˜å·²ç»æ”¯æŒäº†SPDYï¼Œå¦‚æœæ²¡æœ‰çš„è¯éœ€è¦é‡æ–°ä¸‹è½½å’Œç¼–è¯‘Nginxï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Š`--with-http_spdy_module`é€‰é¡¹ã€‚\n\nç„¶åä¿®æ”¹Nginxçš„é…ç½®æ–‡ä»¶\n\n{% codeblock %}\nserver {\n    listen       80;\n    listen       443 ssl spdy;\n    server_name  ppxu.me *.ppxu.me;\n\n    add_header   Alternate-Protocol  443:npn-spdy/3.1;\n    ...\n{% endcodeblock %}\n\né‡å¯Nginxï¼ŒSPDYå°±å¯åŠ¨æˆåŠŸäº†ã€‚\n\nè®¿é—®ç½‘ç«™ï¼Œç„¶ååœ¨chromeä¸­æ‰“å¼€`chrome://net-internals/#http2`ï¼Œå°±å¯ä»¥çœ‹åˆ°ç«™ç‚¹å·²ç»æ”¯æŒäº†SPDY3.1\n\n![http://7xpbfd.com1.z0.glb.clouddn.com/spdy.png](http://7xpbfd.com1.z0.glb.clouddn.com/spdy.png)\n\nè¿˜å¯ä»¥åœ¨è¿™ä¸ª[ç½‘ç«™](https://spdycheck.org/)æ£€æŸ¥SPDYå¯åŠ¨æƒ…å†µã€‚\n\nä¸è¿‡SPDYåè®®å·²ç»åºŸå¼ƒäº†ï¼Œè¿˜æ˜¯èµ¶ç´§æä¸ŠHTTP/2æ‰æ˜¯æ­£äº‹ã€‚\n\n#### å‚è€ƒèµ„æ–™\n\n* [http://nginx.org/](http://nginx.org/)\n\n* [http://www.stefanwille.com/2013/04/using-spdy-with-nginx-1-4/](http://www.stefanwille.com/2013/04/using-spdy-with-nginx-1-4/)\n\n* [http://www.linuxidc.com/Linux/2015-09/123251.htm](http://www.linuxidc.com/Linux/2015-09/123251.htm)\n\n* [http://www.linuxidc.com/Linux/2015-02/112979.htm](http://www.linuxidc.com/Linux/2015-02/112979.htm)\n\n* [http://www.jb51.net/article/59017.htm](http://www.jb51.net/article/59017.htm)\n\n* [http://www.tuicool.com/articles/2mi63q](http://www.tuicool.com/articles/2mi63q)\n","slug":"config-spdy-in-nginx","published":1,"updated":"2015-12-23T13:46:25.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciikb4jce001fnixxbz7n1061"}],"PostAsset":[],"PostCategory":[{"post_id":"ciikb4jbc0000nixxe578z0f6","category_id":"ciikb4jbj0001nixxwdjzbsgn","_id":"ciikb4jbm0004nixxhos5wbof"},{"post_id":"ciikb4jbr000dnixxqhzo0v9x","category_id":"ciikb4jbj0001nixxwdjzbsgn","_id":"ciikb4jbs000enixx5shca1t0"},{"post_id":"ciikb4jbw000pnixxa3l69vxk","category_id":"ciikb4jbj0001nixxwdjzbsgn","_id":"ciikb4jby000qnixxm47msltb"},{"post_id":"ciikb4jc90015nixxzaatdijw","category_id":"ciikb4jbj0001nixxwdjzbsgn","_id":"ciikb4jca0016nixxy4bznmr4"},{"post_id":"ciikb4jce001fnixxbz7n1061","category_id":"ciikb4jbj0001nixxwdjzbsgn","_id":"ciikb4jch001gnixx04kok52e"},{"post_id":"ciikb4jc4000ynixxkkm3huk8","category_id":"ciikb4jbj0001nixxwdjzbsgn","_id":"ciil2sitx0002aixxelqwz1bm"}],"PostTag":[{"post_id":"ciikb4jbc0000nixxe578z0f6","tag_id":"ciikb4jbj0002nixxc45yrthy","_id":"ciikb4jbp0008nixxp3jka4vj"},{"post_id":"ciikb4jbc0000nixxe578z0f6","tag_id":"ciikb4jbm0003nixxsgh7lfgb","_id":"ciikb4jbp0009nixxcu1rvxfl"},{"post_id":"ciikb4jbc0000nixxe578z0f6","tag_id":"ciikb4jbn0005nixx24lz1nzb","_id":"ciikb4jbp000anixxxscbsv32"},{"post_id":"ciikb4jbc0000nixxe578z0f6","tag_id":"ciikb4jbo0006nixxfy4e6glq","_id":"ciikb4jbq000bnixxy987q6os"},{"post_id":"ciikb4jbc0000nixxe578z0f6","tag_id":"ciikb4jbo0007nixx1ai7uhqz","_id":"ciikb4jbq000cnixxrj6mk94e"},{"post_id":"ciikb4jbr000dnixxqhzo0v9x","tag_id":"ciikb4jbt000fnixxagz1c585","_id":"ciikb4jbu000knixxj7egmfr6"},{"post_id":"ciikb4jbr000dnixxqhzo0v9x","tag_id":"ciikb4jbt000gnixxma4och9g","_id":"ciikb4jbu000lnixxj7gsvjre"},{"post_id":"ciikb4jbr000dnixxqhzo0v9x","tag_id":"ciikb4jbt000hnixx968998y5","_id":"ciikb4jbu000mnixxvr74f4c8"},{"post_id":"ciikb4jbr000dnixxqhzo0v9x","tag_id":"ciikb4jbt000inixxx7ld157j","_id":"ciikb4jbu000nnixx31vsnr7f"},{"post_id":"ciikb4jbr000dnixxqhzo0v9x","tag_id":"ciikb4jbt000jnixxbj712gr0","_id":"ciikb4jbu000onixxevnez0id"},{"post_id":"ciikb4jbw000pnixxa3l69vxk","tag_id":"ciikb4jbt000fnixxagz1c585","_id":"ciikb4jbz000snixx9491leqs"},{"post_id":"ciikb4jbw000pnixxa3l69vxk","tag_id":"ciikb4jbt000gnixxma4och9g","_id":"ciikb4jbz000tnixxftezup6a"},{"post_id":"ciikb4jbw000pnixxa3l69vxk","tag_id":"ciikb4jbt000hnixx968998y5","_id":"ciikb4jc0000unixx92bux8fo"},{"post_id":"ciikb4jbw000pnixxa3l69vxk","tag_id":"ciikb4jby000rnixxtzjlsrss","_id":"ciikb4jc0000vnixxuz1ao1eu"},{"post_id":"ciikb4jbw000pnixxa3l69vxk","tag_id":"ciikb4jbn0005nixx24lz1nzb","_id":"ciikb4jc0000wnixxv0owfk0u"},{"post_id":"ciikb4jc4000ynixxkkm3huk8","tag_id":"ciikb4jbn0005nixx24lz1nzb","_id":"ciikb4jc80012nixxjjtdiy6c"},{"post_id":"ciikb4jc4000ynixxkkm3huk8","tag_id":"ciikb4jc70010nixxk2vbu98u","_id":"ciikb4jc80013nixxjsj0ujab"},{"post_id":"ciikb4jc4000ynixxkkm3huk8","tag_id":"ciikb4jc70011nixxjh0djigh","_id":"ciikb4jc80014nixxappq3fc8"},{"post_id":"ciikb4jc90015nixxzaatdijw","tag_id":"ciikb4jbt000fnixxagz1c585","_id":"ciikb4jcc0019nixxte8d6kgw"},{"post_id":"ciikb4jc90015nixxzaatdijw","tag_id":"ciikb4jbt000gnixxma4och9g","_id":"ciikb4jcc001anixxsb0784jg"},{"post_id":"ciikb4jc90015nixxzaatdijw","tag_id":"ciikb4jbt000hnixx968998y5","_id":"ciikb4jcc001bnixx08u1rhx0"},{"post_id":"ciikb4jc90015nixxzaatdijw","tag_id":"ciikb4jbt000inixxx7ld157j","_id":"ciikb4jcc001cnixxr8zlm269"},{"post_id":"ciikb4jc90015nixxzaatdijw","tag_id":"ciikb4jcb0017nixxqzj62sui","_id":"ciikb4jcc001dnixxl93n4orx"},{"post_id":"ciikb4jc90015nixxzaatdijw","tag_id":"ciikb4jcb0018nixx0t87n53a","_id":"ciikb4jcc001enixx02p8g9ag"},{"post_id":"ciikb4jce001fnixxbz7n1061","tag_id":"ciikb4jbt000fnixxagz1c585","_id":"ciikb4jci001inixx218i02xf"},{"post_id":"ciikb4jce001fnixxbz7n1061","tag_id":"ciikb4jbt000gnixxma4och9g","_id":"ciikb4jci001jnixxqdlmslbk"},{"post_id":"ciikb4jce001fnixxbz7n1061","tag_id":"ciikb4jbt000hnixx968998y5","_id":"ciikb4jci001knixxzjzwdhfv"},{"post_id":"ciikb4jce001fnixxbz7n1061","tag_id":"ciikb4jbt000inixxx7ld157j","_id":"ciikb4jci001lnixxjk6rpgy0"},{"post_id":"ciikb4jce001fnixxbz7n1061","tag_id":"ciikb4jch001hnixx4lqxwfhl","_id":"ciikb4jci001mnixxg95tvjfn"}],"Tag":[{"name":"github","_id":"ciikb4jbj0002nixxc45yrthy"},{"name":"webhooks","_id":"ciikb4jbm0003nixxsgh7lfgb"},{"name":"hexo","_id":"ciikb4jbn0005nixx24lz1nzb"},{"name":"deploy","_id":"ciikb4jbo0006nixxfy4e6glq"},{"name":"shell","_id":"ciikb4jbo0007nixx1ai7uhqz"},{"name":"aliyun","_id":"ciikb4jbt000fnixxagz1c585"},{"name":"ecs","_id":"ciikb4jbt000gnixxma4och9g"},{"name":"centos","_id":"ciikb4jbt000hnixx968998y5"},{"name":"nginx","_id":"ciikb4jbt000inixxx7ld157j"},{"name":"http2","_id":"ciikb4jbt000jnixxbj712gr0"},{"name":"nodejs","_id":"ciikb4jby000rnixxtzjlsrss"},{"name":"markdown","_id":"ciikb4jc70010nixxk2vbu98u"},{"name":"emoji","_id":"ciikb4jc70011nixxjh0djigh"},{"name":"ssl","_id":"ciikb4jcb0017nixxqzj62sui"},{"name":"https","_id":"ciikb4jcb0018nixx0t87n53a"},{"name":"spdy","_id":"ciikb4jch001hnixx4lqxwfhl"}]}}